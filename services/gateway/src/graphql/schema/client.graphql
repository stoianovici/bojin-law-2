# Client GraphQL Schema
# OPS-226: Client Query + Resolver for Client Portfolio View

# ============================================================================
# Types
# ============================================================================

"""
Summary of a case for client portfolio view (OPS-226)
Lightweight case representation without sensitive financial data
"""
type CaseSummaryForClient {
  """Unique identifier for the case"""
  id: UUID!

  """Case number for tracking"""
  caseNumber: String!

  """Title of the case"""
  title: String!

  """Current status"""
  status: CaseStatus!

  """Type of legal case"""
  type: String!

  """Date when the case was opened"""
  openedDate: DateTime!
}

"""
Administrator or contact person for a client
"""
type ClientPerson {
  """Unique identifier"""
  id: String!

  """Full name"""
  name: String!

  """Role or position"""
  role: String!

  """Email address"""
  email: String

  """Phone number"""
  phone: String
}

"""
Client with their case portfolio (OPS-226)
Extended client type that includes all cases for the client
"""
type ClientWithCases {
  """Unique identifier for the client"""
  id: UUID!

  """Client's full name or organization name"""
  name: String!

  """Contact email address (extracted from contactInfo)"""
  email: String

  """Contact phone number (extracted from contactInfo)"""
  phone: String

  """Physical address of the client"""
  address: String

  """Client type: individual or company"""
  clientType: String

  """Company type: SRL, SA, PFA, II, IF, Other"""
  companyType: String

  """CUI / Cod Fiscal (tax ID)"""
  cui: String

  """Registration number (Nr. Registru Comerț)"""
  registrationNumber: String

  """List of administrators"""
  administrators: [ClientPerson!]!

  """List of contact persons"""
  contacts: [ClientPerson!]!

  """All cases for this client"""
  cases: [CaseSummaryForClient!]!

  """Total number of cases"""
  caseCount: Int!

  """Number of active cases"""
  activeCaseCount: Int!

  """Timestamp when the client record was created"""
  createdAt: DateTime!

  """Timestamp when the client record was last updated"""
  updatedAt: DateTime!
}

# ============================================================================
# Input Types
# ============================================================================

"""
Input for a client person (administrator or contact)
"""
input ClientPersonInput {
  """Unique identifier (optional for new entries)"""
  id: String

  """Full name (required)"""
  name: String!

  """Role or position (required)"""
  role: String!

  """Email address"""
  email: String

  """Phone number"""
  phone: String
}

"""
Input for creating a new client
"""
input CreateClientInput {
  """Client's full name or organization name (required)"""
  name: String!

  """Contact email address"""
  email: String

  """Contact phone number"""
  phone: String

  """Physical address of the client"""
  address: String

  """Client type: individual or company"""
  clientType: String

  """Company type: SRL, SA, PFA, II, IF, Other"""
  companyType: String

  """CUI / Cod Fiscal (tax ID)"""
  cui: String

  """Registration number (Nr. Registru Comerț)"""
  registrationNumber: String

  """List of administrators"""
  administrators: [ClientPersonInput!]

  """List of contact persons"""
  contacts: [ClientPersonInput!]
}

"""
Input for updating an existing client
"""
input UpdateClientInput {
  """Client's full name or organization name"""
  name: String

  """Contact email address"""
  email: String

  """Contact phone number"""
  phone: String

  """Physical address of the client"""
  address: String

  """Client type: individual or company"""
  clientType: String

  """Company type: SRL, SA, PFA, II, IF, Other"""
  companyType: String

  """CUI / Cod Fiscal (tax ID)"""
  cui: String

  """Registration number (Nr. Registru Comerț)"""
  registrationNumber: String

  """List of administrators"""
  administrators: [ClientPersonInput!]

  """List of contact persons"""
  contacts: [ClientPersonInput!]
}

# ============================================================================
# Queries
# ============================================================================

extend type Query {
  """
  Get a client by ID with their case portfolio (OPS-226)
  Returns null if client not found or not in user's firm
  Authorization: Authenticated users in the same firm
  """
  client(id: UUID!): ClientWithCases
}

# ============================================================================
# Mutations
# ============================================================================

extend type Mutation {
  """
  Create a new client
  Authorization: Authenticated users in the same firm (Partner/Associate only)
  """
  createClient(input: CreateClientInput!): ClientWithCases!

  """
  Update an existing client
  Authorization: Authenticated users in the same firm (Partner/Associate only)
  """
  updateClient(id: UUID!, input: UpdateClientInput!): ClientWithCases
}
