# Story 2.8.2: Case Approval Workflow - Notifications
# GraphQL schema for in-app notifications

enum NotificationType {
  # Case Approval (Story 2.8.2)
  CasePendingApproval
  CaseApproved
  CaseRejected
  # Document Review (Story 3.6)
  DocumentReviewRequested
  DocumentReviewAssigned
  DocumentApproved
  DocumentRejected
  DocumentRevisionRequested
  DocumentCommentAdded
  DocumentCommentMentioned
  # Task Delegation (Story 4.2)
  DelegationRequested
  DelegationAccepted
  DelegationDeclined
  # Task Reminder and Dependency (Story 4.4)
  TaskDeadlineReminder
  TaskOverdue
  DependencyBlocked
  DependencyUnblocked
  # Task Collaboration (Story 4.6)
  TaskCommentAdded
  TaskCommentMentioned
  TaskCommentReplied
  TaskStatusUpdated
  SubtaskCreated
  TaskAttachmentAdded
  # AI Suggestions (Story 5.4)
  MorningBriefingReady
  AISuggestionCreated
  # Communication Hub (Story 5.5)
  BulkCommunicationCompleted
  CommunicationExportReady
}

type Notification {
  id: UUID!
  userId: UUID!
  user: User!
  type: NotificationType!
  title: String!
  message: String!
  link: String
  read: Boolean!
  caseId: UUID
  createdAt: DateTime!
  readAt: DateTime
}

extend type Query {
  """
  Get notifications for current user
  Ordered by createdAt descending (newest first)
  Optional filter by read status
  """
  notifications(read: Boolean, limit: Int): [Notification!]!

  """
  Get count of unread notifications for current user
  Used for notification badge
  """
  unreadNotificationCount: Int!
}

extend type Mutation {
  """
  Mark a notification as read
  Returns the updated notification
  """
  markNotificationAsRead(id: UUID!): Notification!

  """
  Mark all notifications as read for current user
  Returns count of notifications marked as read
  """
  markAllNotificationsAsRead: Int!
}
