# OPS-174: Supervisor Review Queue Tab

**Type**: Feature
**Priority**: P2-Medium
**Status**: Verifying
**Epic**: Documents Separation & Review Workflow (OPS-171 to OPS-177)

## Problem

Supervisors (Partners, Senior Associates) have no dedicated view to see documents awaiting their review. They must manually check each case to find pending reviews, which is inefficient and error-prone.

## Solution

Add a "De revizuit" (For Review) tab visible only to supervisor roles, showing all documents where they are assigned as reviewer and status is IN_REVIEW.

## Implementation Summary

### Files Modified

1. **`apps/web/src/stores/document-folders.store.ts`**
   - Extended `DocumentTab` type to include `'review'`

2. **`services/gateway/src/graphql/schema/document.graphql`**
   - Added `documentsForReview` and `documentsForReviewCount` queries
   - Added `DocumentForReview` type with document, case, submittedBy, submittedAt fields

3. **`services/gateway/src/graphql/resolvers/document.resolvers.ts`**
   - Implemented `documentsForReview` resolver with role-based access (Partner, Associate)
   - Implemented `documentsForReviewCount` resolver for badge display
   - Filters by reviewerId = current user and status = IN_REVIEW
   - Orders by submittedAt ascending (FIFO)

### Files Created

1. **`apps/web/src/hooks/useDocumentsForReview.ts`**
   - `useDocumentsForReview()` hook - fetches documents pending review, groups by case
   - `useDocumentsForReviewCount()` hook - fetches count for badge, polls every 60s

2. **`apps/web/src/components/documents/ReviewQueueList.tsx`**
   - Main component showing grouped document list
   - `ReviewQueueItem` - individual document with preview/review buttons
   - `ReviewQueueCaseGroup` - groups documents by case
   - Empty state when no documents pending
   - Loading skeleton

3. **`apps/web/src/components/documents/DocumentsContentPanel.tsx` (modified)**
   - Added conditional "De revizuit" tab for supervisors
   - Shows badge with review count
   - Renders ReviewQueueList when tab active
   - Handlers for preview and review actions

## Dependencies

- OPS-171 (reviewerId field) - **Closed**
- OPS-172 (IN_REVIEW status) - **Complete**
- OPS-173 (tab infrastructure) - **Verifying**

## Acceptance Criteria

- [x] "De revizuit" tab only visible to PARTNER and ASSOCIATE roles
- [x] Tab shows badge with count of pending reviews
- [x] Documents grouped by case
- [x] Each item shows: document name, submitter, submission date
- [x] Preview button opens document preview
- [x] Review button opens review actions (placeholder - OPS-177)
- [x] Empty state when no documents pending
- [x] FIFO ordering (oldest first)

## Verification Steps

1. Log in as a Partner or Associate role
2. Navigate to Documents section
3. Verify "De revizuit" tab appears (not visible for Paralegal)
4. If documents are in IN_REVIEW status with current user as reviewer:
   - Verify they appear in the list grouped by case
   - Verify badge shows correct count
   - Click Preview to open document preview
   - Click "Revizuie»ôte" to open preview (actual review actions in OPS-177)
5. When no documents pending, verify empty state message appears

## Notes

The review actions (approve/request changes) are implemented in OPS-177. This issue focuses on the queue view.
