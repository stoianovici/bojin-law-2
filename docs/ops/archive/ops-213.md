# OPS-213: BillingSection Component

**Type**: Feature | **Priority**: P2-Medium | **Complexity**: M
**Status**: Closed

## Problem

Billing configuration (type, rates, fixed amount) needs inline editing for Partners only.

## Approach

Entire section wrapped in `FinancialData`. Billing type select, conditional fields based on type. Custom rate inputs for Partner/Associate/Paralegal.

```tsx
interface BillingSectionProps {
  caseId: string;
  billing: {
    type: 'Hourly' | 'Fixed';
    fixedAmount?: number;
    customRates?: {
      partnerRate: number;
      associateRate: number;
      paralegalRate: number;
    };
  };
  editable: boolean;
}

function BillingSection({ caseId, billing, editable }: BillingSectionProps) {
  return (
    <FinancialData>
      <Card title="Facturare">
        <div className="space-y-4">
          <InlineEditField
            caseId={caseId}
            fieldName="billingType"
            value={billing.type}
            label="Tip facturare"
            fieldType="select"
            options={[
              { value: 'Hourly', label: 'Pe oră' },
              { value: 'Fixed', label: 'Sumă fixă' },
            ]}
            editable={editable}
          />

          {billing.type === 'Fixed' && (
            <InlineEditField
              caseId={caseId}
              fieldName="fixedAmount"
              value={billing.fixedAmount}
              label="Sumă fixă"
              fieldType="number"
              editable={editable}
              formatDisplay={(v) => (v ? `${v.toLocaleString('ro-RO')} RON` : '-')}
            />
          )}

          {billing.type === 'Hourly' && (
            <div className="space-y-3">
              <h4 className="text-sm font-medium text-gray-700">Rate orare personalizate</h4>
              <div className="grid grid-cols-3 gap-4">
                <InlineEditField
                  caseId={caseId}
                  fieldName="customRates.partnerRate"
                  value={billing.customRates?.partnerRate}
                  label="Partner"
                  fieldType="number"
                  editable={editable}
                  placeholder="RON/oră"
                  formatDisplay={(v) => (v ? `${v} RON/h` : 'Standard')}
                />
                <InlineEditField
                  caseId={caseId}
                  fieldName="customRates.associateRate"
                  value={billing.customRates?.associateRate}
                  label="Asociat"
                  fieldType="number"
                  editable={editable}
                  placeholder="RON/oră"
                  formatDisplay={(v) => (v ? `${v} RON/h` : 'Standard')}
                />
                <InlineEditField
                  caseId={caseId}
                  fieldName="customRates.paralegalRate"
                  value={billing.customRates?.paralegalRate}
                  label="Paralegal"
                  fieldType="number"
                  editable={editable}
                  placeholder="RON/oră"
                  formatDisplay={(v) => (v ? `${v} RON/h` : 'Standard')}
                />
              </div>
            </div>
          )}
        </div>
      </Card>
    </FinancialData>
  );
}
```

## Done When

- [x] Wrapped in `FinancialData` (Partner only)
- [x] Billing type select (Pe oră/Sumă fixă)
- [x] Fixed amount field when type=Fixed
- [x] Custom rates grid when type=Hourly
- [x] Per-field save via `useCaseUpdate`
- [x] Read-only mode when `editable=false`
- [x] Conditional field visibility based on billing type

## Files

- `apps/web/src/components/case/sections/BillingSection.tsx` - new

## Dependencies

- OPS-207: useCaseEditPermission Hook

## Part Of

Expandable Case Workspace Epic (OPS-207 to OPS-217)
