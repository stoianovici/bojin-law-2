# OPS-279: Schema - SentEmailDraft + outlookDraftId Field

**Type**: Feature
**Priority**: P1-High
**Status**: Closed
**Blocked By**: None

## Problem

No way to track which Outlook draft IDs correspond to emails initiated from the platform. Need audit trail to answer "was this draft actually sent from Outlook?"

## Solution

1. Add `outlookDraftId: String?` field to existing `EmailDraft` model
2. Create new `SentEmailDraft` model for tracking ad-hoc sends (sendNewEmail, replyToEmail, task reminders):
   - `id`, `outlookDraftId`, `userId`, `firmId`
   - `recipientEmail`, `subject`, `caseId?`
   - `createdAt`, `source` (enum: NEW_EMAIL, REPLY, TASK_REMINDER, OVERDUE_NOTIFICATION)
3. Run migration

## Done When

- [x] `EmailDraft.outlookDraftId` field exists
- [x] `SentEmailDraft` table created with proper indexes
- [x] Migration runs successfully on local and staging

## Files

- `packages/database/prisma/schema.prisma`
- `packages/database/prisma/migrations/20251227100000_universal_draft_mode_schema/migration.sql`

## Part Of

Universal Draft Mode Epic (OPS-279 to OPS-284)

## Notes

This enables tracking but doesn't change behavior. The actual draft creation happens in OPS-280.

## Implementation Summary

Added to Prisma schema:

- `EmailDraft.outlookDraftId: String?` field
- `SentEmailSource` enum with values: NEW_EMAIL, REPLY, TASK_REMINDER, OVERDUE_NOTIFICATION
- `SentEmailDraft` model with proper indexes and relations to User, Firm, Case

Migration created and applied successfully.
