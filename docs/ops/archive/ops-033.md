# OPS-033: Firm-wide Email Search

**Status:** Open
**Priority:** P3-Low
**Type:** Feature
**Created:** 2025-12-16
**Dependencies:** OPS-032 (recommended but not blocking)

## Problem

With OPS-032 repurposing `/communications` to show only pending emails, users lose the ability to browse/search all synced emails across the firm.

Use cases for "find any email":

- "Where did that email go?" - checking assignment
- "Did we receive X?" - quick lookup
- "What's the history with contact Y?" - research

## Solution Options

### Option A: Global Search Integration

Add email results to the existing global search (if one exists, or plan to add).

**Pros:**

- Unified search experience
- No new UI needed

**Cons:**

- May not exist yet
- Might be overkill for MVP

### Option B: Search Bar on /communications

Add a search input at top of the classification queue page. When searching, temporarily show search results instead of queue.

**Pros:**

- Contextual - you're already thinking about emails
- Simple toggle between queue and search

**Cons:**

- Mixes two mental models on one page

### Option C: Separate /emails Route

Create a dedicated `/emails` route for browsing all synced emails.

**Pros:**

- Clear separation of concerns
- Can have full inbox-style UI here

**Cons:**

- Another navigation item
- Might be confusing with `/communications`

### Option D: Defer Entirely

Don't build this. Users can:

- Search in Outlook directly
- Look in case's Communications tab
- Ask "where is email X?" becomes a forcing function for good classification

**Pros:**

- Zero effort
- Forces good hygiene

**Cons:**

- Might frustrate users who want quick lookup

## Recommendation

Start with **Option D** (defer). Monitor user feedback after OPS-032 ships. If "find any email" is a real pain point, implement Option B (search on /communications page).

## If Implementing Option B

### Scope

1. Add search input to `/communications` header
2. When query entered, show search results instead of queue
3. Search results show email list with case assignment status
4. Clear search returns to queue view

### Files to Modify

- `apps/web/src/app/communications/page.tsx`
- Possibly new `useEmailSearch.ts` hook

### GraphQL Needed

```graphql
query searchEmails($query: String!, $limit: Int) {
  searchEmails(query: $query, limit: $limit) {
    id
    subject
    from {
      name
      address
    }
    receivedDateTime
    case {
      id
      title
    }
    isAssigned
  }
}
```

## Acceptance Criteria (if implementing)

- [ ] Search input visible on /communications
- [ ] Typing query shows search results
- [ ] Results show email with case assignment
- [ ] Clicking result navigates to case or shows email
- [ ] Clear/escape returns to queue

## Notes

This is intentionally low priority. The goal of OPS-032 is to simplify, not to recreate Outlook. If users truly need to search all emails, they have Outlook. This feature is a convenience, not a necessity.

## Session Log

_No sessions yet_
