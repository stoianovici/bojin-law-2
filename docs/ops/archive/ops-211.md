# OPS-211: ContactsSection Component

**Type**: Feature | **Priority**: P2-Medium | **Complexity**: L
**Status**: Closed

## Problem

Case contacts/actors need inline add, edit, remove with role-based access.

## Approach

Card-based contact list with inline editing per card. Add button for new contacts. Each card shows name, role, email domains, organization. Edit/delete icons per card.

```tsx
interface ContactsSectionProps {
  caseId: string;
  actors: CaseActor[];
  editable: boolean;
}

function ContactsSection({ caseId, actors, editable }: ContactsSectionProps) {
  const [editingId, setEditingId] = useState<string | null>(null);
  const [isAdding, setIsAdding] = useState(false);

  return (
    <Card
      title="Contacte & Părți"
      action={
        editable && (
          <Button size="sm" variant="ghost" onClick={() => setIsAdding(true)}>
            + Adaugă
          </Button>
        )
      }
    >
      <div className="space-y-3">
        {actors.map((actor) => (
          <InlineContactCard
            key={actor.id}
            actor={actor}
            caseId={caseId}
            isEditing={editingId === actor.id}
            onEdit={() => setEditingId(actor.id)}
            onSave={() => setEditingId(null)}
            onCancel={() => setEditingId(null)}
            editable={editable}
          />
        ))}
        {isAdding && (
          <InlineContactCard
            caseId={caseId}
            isNew
            onSave={() => setIsAdding(false)}
            onCancel={() => setIsAdding(false)}
            editable={true}
          />
        )}
      </div>
    </Card>
  );
}
```

### InlineContactCard

```tsx
interface InlineContactCardProps {
  actor?: CaseActor;
  caseId: string;
  isNew?: boolean;
  isEditing?: boolean;
  onEdit?: () => void;
  onSave: () => void;
  onCancel: () => void;
  editable: boolean;
}

function InlineContactCard({ actor, caseId, isNew, isEditing, onEdit, onSave, onCancel, editable }: InlineContactCardProps) {
  const [form, setForm] = useState({
    name: actor?.name || '',
    role: actor?.role || 'Client',
    email: actor?.email || '',
    organization: actor?.organization || '',
    phone: actor?.phone || '',
  });

  const isEditMode = isNew || isEditing;

  if (!isEditMode) {
    return (
      <div className="border rounded-lg p-3 flex justify-between items-start">
        <div>
          <div className="flex items-center gap-2">
            <span className="text-xs bg-gray-100 px-2 py-0.5 rounded">
              {roleLabels[actor.role]}
            </span>
            <span className="font-medium">{actor.name}</span>
          </div>
          {actor.email && <div className="text-sm text-gray-500">{actor.email}</div>}
          {actor.organization && <div className="text-sm text-gray-500">{actor.organization}</div>}
        </div>
        {editable && (
          <div className="flex gap-1">
            <button onClick={onEdit}><PencilIcon /></button>
            <button onClick={handleDelete}><TrashIcon /></button>
          </div>
        )}
      </div>
    );
  }

  return (
    <div className="border-2 border-blue-500 rounded-lg p-3 space-y-2">
      <select value={form.role} onChange={...}>
        <option value="Client">Client</option>
        <option value="OpposingParty">Parte Adversă</option>
        <option value="Judge">Judecător</option>
        <option value="Lawyer">Avocat</option>
        <option value="Other">Altul</option>
      </select>
      <input placeholder="Nume" value={form.name} onChange={...} />
      <input placeholder="Email" value={form.email} onChange={...} />
      <input placeholder="Organizație" value={form.organization} onChange={...} />
      <div className="flex justify-end gap-2">
        <Button size="sm" variant="ghost" onClick={onCancel}>Anulează</Button>
        <Button size="sm" onClick={handleSave}>Salvează</Button>
      </div>
    </div>
  );
}
```

## Done When

- [x] Renders existing actors as cards
- [x] Inline edit mode per card (name, role, email, org)
- [x] Add new actor inline (not modal)
- [x] Delete actor with confirmation
- [x] Role dropdown (Client, Parte Adversă, Avocat Parte Adversă, Martor, Expert)
- [x] Per-actor save via `useActorUpdate`/`useActorAdd`
- [x] Read-only mode when `editable=false`

## Files

- `apps/web/src/components/case/sections/ContactsSection.tsx` - new
- `apps/web/src/components/case/InlineContactCard.tsx` - new

## Dependencies

- OPS-207: useCaseEditPermission Hook

## Part Of

Expandable Case Workspace Epic (OPS-207 to OPS-217)
