# OPS-275: Timesheet Billable Controls

**Type**: Feature
**Priority**: P1-High
**Status**: Closed
**Blocked By**: OPS-273

## Problem

Some work shouldn't be billed to client (courtesy calls, internal overhead, goodwill adjustments). Partners need to mark entries as non-billable before generating invoices.

## Solution

Per-row billable checkbox that excludes entries from invoice totals and visually distinguishes non-billable work.

## Implementation

1. Add checkbox column as first column in TimesheetRow:
   - Checked = billable (default state)
   - Unchecked = non-billable
2. Non-billable row styling:
   - Grayed out text (opacity-50)
   - "Non-fact" badge next to hours
   - Strikethrough on cost (if shown)
3. Persist billable flag via `updateTimeEntry` mutation (reuse from OPS-274)
4. Update TimesheetTotals to show separate lines:
   - "X ore facturabile · Y,YYY RON"
   - "Z ore non-facturabile" (smaller, muted text)
5. Non-billable entries excluded from cost totals
6. Bulk toggle: shift+click to toggle range

## Done When

- [x] Checkbox column shows billable state
- [x] Clicking checkbox toggles billable flag
- [x] Non-billable rows have distinct styling (grayed, badge)
- [x] Billable flag persists to database
- [x] Totals show separate billable/non-billable counts
- [x] Cost totals exclude non-billable entries
- [x] Shift+click toggles range of checkboxes

## Files

- `apps/web/src/components/team-activity/TimesheetRow.tsx` - add checkbox, conditional styling
- `apps/web/src/components/team-activity/TimesheetTotals.tsx` - split totals display
- `apps/web/src/hooks/useTimesheetData.ts` - billable filtering for totals

## Technical Notes

- Reuse `updateTimeEntry` mutation from OPS-274
- TimeEntry model already has `billable` boolean field
- Default billable=true for new entries
- Consider adding "Marchează toate ca facturabile/non-facturabile" bulk action

## UI Text (Romanian)

- Badge: "Non-fact"
- Totals: "X ore facturabile · Y,YYY RON"
- Non-billable totals: "Z ore non-facturabile"
- Tooltip: "Marchează ca non-facturabil"
