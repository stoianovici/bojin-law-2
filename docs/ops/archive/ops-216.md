# OPS-216: Draft Mode New Case Page

**Type**: Feature | **Priority**: P2-Medium | **Complexity**: L
**Status**: Closed

## Problem

Need `/cases/new` page that renders workspace in draft mode with progressive tab visibility.

## Solution

Created a dedicated new case page that uses `useDraftCase` hook for local state management instead of the per-field save pattern used by existing section components. The page includes:

1. **Custom draft form fields** - Instead of reusing section components (which require `caseId` for per-field saves), created inline form components that work with local draft state
2. **DraftModeToolbar** - Fixed at bottom with save/cancel actions, validation errors display, and approval notice for Associates
3. **Role-based billing section** - Only visible to Partners, wrapped in `FinancialData` component
4. **Draft actor management** - Inline forms for adding/editing contacts with role selection

### Implementation Approach

Rather than adapting the existing section components (CaseDetailsSection, ContactsSection, etc.) which are designed for existing cases with per-field saves via GraphQL mutations, the new case page uses:

- `DraftField` - Generic form field component for text/textarea/select/number inputs
- `DraftActorCard` - Contact form card with role dropdown and all contact fields
- `DraftBillingSection` - Billing type selector with conditional fixed amount or custom rates

All changes stay local until the user clicks "Creează Dosar", which calls `useDraftCase.save()` to create the case via the `createCase` mutation.

## Done When

- [x] `/cases/new` renders empty workspace
- [x] Uses `useDraftCase` for state (not `useCase`)
- [x] `DraftModeToolbar` fixed at bottom
- [x] Only Overview content visible (no tabs)
- [x] Section components work with draft state
- [x] Approval banner for Associates ("Dosarul va fi trimis spre aprobare")
- [x] Save creates case and redirects to `/cases/[id]`
- [x] Cancel navigates back with confirmation if dirty
- [x] Required field validation (title, description, type, clientName)
- [x] Page title shows draft title or "Dosar Nou"

## Files

- `apps/web/src/app/cases/new/page.tsx` - new page with draft mode UI

## Dependencies

- OPS-208: useDraftCase Hook ✅
- OPS-209: DraftModeToolbar Component ✅
- OPS-214: OverviewTab Refactor (for section components) ✅

## Part Of

Expandable Case Workspace Epic (OPS-207 to OPS-217)
