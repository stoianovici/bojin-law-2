# OPS-214: OverviewTab Refactor

**Type**: Refactor | **Priority**: P2-Medium | **Complexity**: M
**Status**: Closed

## Problem

OverviewTab currently has inline section code. Need to use new section components and wire up edit mode.

## Solution

Refactored OverviewTab to:

1. Import and use section components (CaseDetailsSection, ContactsSection, ReferencesSection, BillingSection)
2. Wire up `useCaseEditPermission` hook for permission checks
3. Read `?edit=true` query param to enable edit mode
4. Pass `editable` prop to editable sections based on permissions
5. Keep read-only sections (Team Members, Activity, Deadlines, Stats) as-is with Card wrapper

Key changes:

- Updated `OverviewTabProps` to use `CaseWithFullRelations` instead of `Case`
- Updated `CaseWorkspaceData.case` type in page.tsx to match
- Prepared billing data object from case fields
- Used `parseReferencesFromMetadata` to extract references from case metadata

## Done When

- [x] Uses `CaseDetailsSection` component
- [x] Uses `ContactsSection` component
- [x] Uses `ReferencesSection` component
- [x] Uses `BillingSection` component
- [x] Reads `?edit=true` query param
- [x] Passes `editable` prop correctly based on permissions
- [x] Existing read-only sections unchanged (TeamMembers, Activity, Deadlines, Stats)
- [x] No visual regression in view mode
- [x] Edit mode correctly enables inline editing

## Files Changed

- `apps/web/src/components/case/tabs/OverviewTab.tsx` - refactored to use section components
- `apps/web/src/app/cases/[caseId]/page.tsx` - updated CaseWorkspaceData type

## Dependencies

- OPS-210: CaseDetailsSection Component (Closed)
- OPS-211: ContactsSection Component (Closed)
- OPS-212: ReferencesSection Component (Closed)
- OPS-213: BillingSection Component (Closed)

## Part Of

Expandable Case Workspace Epic (OPS-207 to OPS-217)
