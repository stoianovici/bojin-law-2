# OPS-210: CaseDetailsSection Component

**Type**: Feature | **Priority**: P2-Medium | **Complexity**: M
**Status**: Closed

## Problem

Case details (title, description, type, client, value) need inline editing with permission checks.

## Approach

Extract from OverviewTab into standalone component. Uses `InlineEditField` for each field. Wraps value in `FinancialData`. Accepts `editable` prop from `useCaseEditPermission`.

```tsx
interface CaseDetailsSectionProps {
  caseId: string;
  caseData: {
    title: string;
    description: string;
    type: string;
    clientId: string;
    clientName: string;
    value?: number;
    openedAt: Date;
  };
  editable: boolean;
  canEditFinancials: boolean;
}

function CaseDetailsSection({
  caseId,
  caseData,
  editable,
  canEditFinancials,
}: CaseDetailsSectionProps) {
  return (
    <Card title="Detalii Dosar">
      <div className="space-y-4">
        <InlineEditField
          caseId={caseId}
          fieldName="title"
          value={caseData.title}
          label="Titlu"
          editable={editable}
        />
        <InlineEditField
          caseId={caseId}
          fieldName="description"
          value={caseData.description}
          label="Descriere"
          fieldType="textarea"
          editable={editable}
        />
        <InlineEditField
          caseId={caseId}
          fieldName="type"
          value={caseData.type}
          label="Tip dosar"
          fieldType="select"
          options={caseTypes}
          editable={editable}
        />
        <InlineEditField
          caseId={caseId}
          fieldName="clientId"
          value={caseData.clientId}
          label="Client"
          fieldType="autocomplete" // NEW type
          displayValue={caseData.clientName}
          editable={editable}
        />
        <div className="text-sm">
          <span className="text-gray-500">Deschis:</span>{' '}
          {format(caseData.openedAt, 'd MMMM yyyy', { locale: ro })}
        </div>
        {canEditFinancials && (
          <FinancialData>
            <InlineEditField
              caseId={caseId}
              fieldName="value"
              value={caseData.value}
              label="Valoare dosar"
              fieldType="number"
              editable={editable}
              formatDisplay={(v) => (v ? `${v.toLocaleString('ro-RO')} RON` : '-')}
            />
          </FinancialData>
        )}
      </div>
    </Card>
  );
}
```

## Done When

- [x] Renders all case detail fields
- [x] `InlineEditField` for title, description (textarea), type (select)
- [x] Client field with autocomplete (new InlineEditField type) - **Note**: autocomplete field type added to InlineEditField, but client editing requires schema changes (clientId not in UpdateCaseInput) - client shown read-only for now
- [x] Value field wrapped in `FinancialData`
- [x] Read-only mode when `editable=false`
- [x] Per-field save via `useCaseUpdate`

## Files

- `apps/web/src/components/case/sections/CaseDetailsSection.tsx` - new
- `apps/web/src/components/case/InlineEditField.tsx` - add autocomplete type

## Dependencies

- OPS-207: useCaseEditPermission Hook

## Part Of

Expandable Case Workspace Epic (OPS-207 to OPS-217)
