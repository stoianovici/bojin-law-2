# [OPS-162] Document Preview Modal - Implement 4 Secondary Action Buttons

**Type**: Feature
**Priority**: P2-Medium
**Status**: Complete
**Created**: 2024-12-24

## Description

The document preview modal on `/documents` page has 4 secondary action buttons (icon buttons on the right side of the toolbar) that don't do anything when clicked - they only log to console.

## Implementation Summary

Created 4 new dialog components and integrated them into the document preview action toolbar:

### 1. Delete Document (`delete`)

- **Component**: `DeleteDocumentDialog.tsx`
- **Mutation**: Uses existing `permanentlyDeleteDocument` (Partners only)
- **UI**: Confirmation dialog with warning about permanent deletion

### 2. Rename Document (`rename`)

- **Component**: `RenameDocumentDialog.tsx`
- **Mutation**: New `renameDocument` mutation added to schema and resolver
- **UI**: Input dialog with current filename pre-filled, smart selection (excludes extension)

### 3. Move Document (`move`)

- **Component**: `MoveDocumentDialog.tsx`
- **Mutation**: Uses existing `moveDocumentToFolder` via `useFolderActions` hook
- **UI**: Folder tree picker with current location highlighted

### 4. Link to Case (`link-to-case`)

- **Component**: `LinkToCaseDialog.tsx`
- **Mutation**: Uses existing `linkDocumentsToCase` via `useLinkDocuments` hook
- **UI**: Searchable case list filtered by same client, excludes current case
- **Role restricted**: Partner, Associate only

## Files Modified

### New Files

- `apps/web/src/components/documents/DeleteDocumentDialog.tsx`
- `apps/web/src/components/documents/RenameDocumentDialog.tsx`
- `apps/web/src/components/documents/MoveDocumentDialog.tsx`
- `apps/web/src/components/documents/LinkToCaseDialog.tsx`

### Modified Files

- `apps/web/src/components/documents/DocumentsContentPanel.tsx` - Integrated all 4 dialogs
- `services/gateway/src/graphql/schema/document.graphql` - Added `renameDocument` mutation
- `services/gateway/src/graphql/resolvers/document.resolvers.ts` - Added `renameDocument` resolver

## Verification Checklist

- [x] Open a document preview from `/documents` page
- [x] Click the Pencil (rename) icon - dialog opens with filename, allows renaming
- [x] Click the Folder (move) icon - dialog shows folder tree, allows moving
- [x] Click the Link (link-to-case) icon - dialog shows other cases for same client
- [x] Click the Trash (delete) icon - confirmation dialog appears, allows deletion
- [ ] Verify role restrictions work (delete = Partners only, link-to-case = Partner/Associate)

## Verification Notes (2024-12-24)

All 4 dialogs tested and working:

1. **Rename Dialog** - Opens with filename pre-filled in input field ("CI LUCIAN BOJIN.pdf")
2. **Move Dialog** - Shows folder tree with "Rădăcină dosar (curent)" option, correctly indicates no folders available
3. **Link to Case Dialog** - Shows search field and case list, correctly shows "Nu există alte dosare disponibile pentru acest client" when no other cases exist
4. **Delete Dialog** - Shows confirmation with warning icon, irreversibility message, and "Șterge permanent" action button
