# OPS-263: CaseCombobox Component

**Type**: Feature | **Priority**: P2-Medium | **Status**: Ready

## Problem

Need a modal-friendly, controlled case picker. Existing `CasePickerDropup` is uncontrolled and opens upward (designed for action bars). Modal needs a combobox that opens downward, supports controlled value, and has clean visual styling.

## Approach

Create `CaseCombobox` based on `CasePickerDropup` patterns:

- Controlled component with `value` and `onChange` props
- Dropdown opens downward (modal context)
- Search input always visible (no 10+ threshold)
- Shows selected case title when closed
- Required field indicator
- Uses existing `useMyCases` hook

## Done When

- [x] `CaseCombobox` component renders with placeholder when no value
- [x] Search filters cases by title, caseNumber, client name
- [x] Selection calls `onChange` with caseId
- [x] Selected case displays in closed state
- [x] Required asterisk shown
- [x] Keyboard navigation works (arrow keys, Enter, Escape)

## Files

- `apps/web/src/components/task/CaseCombobox.tsx` (new)

## Reference

- Pattern: `apps/web/src/components/communication/CasePickerDropup.tsx`
- Hook: `apps/web/src/hooks/useMyCases.ts`

## Technical Notes

```tsx
interface CaseComboboxProps {
  value: string | null;
  onChange: (caseId: string) => void;
  required?: boolean;
  disabled?: boolean;
  className?: string;
}
```

## Session Log

### 2025-12-26: Completed

Implemented `CaseCombobox` component at `apps/web/src/components/task/CaseCombobox.tsx`:

**Features**:

- Controlled component with `value` and `onChange` props
- Opens downward (modal-friendly)
- Always shows search input (no threshold)
- Filters by title, caseNumber, client name
- Shows selected case with folder icon when closed
- Required asterisk shown in placeholder
- Full keyboard navigation:
  - Arrow Up/Down: Navigate options
  - Enter/Space: Open or select
  - Escape: Close
  - Tab: Close and move focus
- Highlighted item auto-scrolls into view
- Check mark indicates selected case in list

**TypeScript**: Compiles without errors.
