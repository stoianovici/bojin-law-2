# OPS-134: Document Preview Action Types & Interfaces

**Status**: Closed
**Type**: Feature
**Priority**: P2-Medium
**Complexity**: S (Small)
**Created**: 2024-12-24

## Context

Part of the Context-Aware Document Preview Actions epic. This is foundational work that enables all other issues in the epic.

## Problem

No type system exists for defining preview modal actions. Need a shared type definition that can express:

- Action configurations per context
- Primary vs secondary action grouping
- Role-based visibility rules
- Action handlers and callbacks

## Solution

Create a new shared types file that defines:

1. `PreviewAction` interface (id, label, icon, variant, handler, roles)
2. `PreviewContext` type (`case-documents`, `email-attachment`, `mapa`, `chronology`)
3. `ActionGroup` type (primary/secondary grouping)
4. `PreviewActionConfig` interface (context + actions mapping)
5. Default action configurations for all 4 contexts

## Implementation

### Type Definitions

```typescript
// packages/shared/types/src/document-preview-actions.ts

import { UserRole } from '@prisma/client';

export type PreviewContext = 'case-documents' | 'email-attachment' | 'mapa' | 'chronology';

export type ActionVariant = 'primary' | 'secondary' | 'danger';

export interface PreviewAction {
  id: string;
  label: string; // Romanian UI text
  icon: string; // Lucide icon name
  variant: ActionVariant;
  group: 'primary' | 'secondary';
  roles?: UserRole[]; // If undefined, available to all roles
}

export interface PreviewActionConfig {
  context: PreviewContext;
  actions: PreviewAction[];
}

// Default action sets per context
export const DEFAULT_PREVIEW_ACTIONS: Record<PreviewContext, PreviewAction[]>;
```

### Context Action Mapping

| Context            | Primary Actions                       | Secondary Actions                |
| ------------------ | ------------------------------------- | -------------------------------- |
| `case-documents`   | Mapă, Descarcă                        | Redenumește, Mută, Leagă, Șterge |
| `email-attachment` | Salvează în documente, Mapă, Descarcă | Marchează irelevant              |
| `mapa`             | Descarcă, Înlocuiește, Elimină        | Deschide în dosar                |
| `chronology`       | Deschide în documente, Descarcă       | Mapă                             |

## Done When

- [x] New file created: `packages/shared/types/src/document-preview-actions.ts`
- [x] All types exported from `packages/shared/types/src/index.ts`
- [x] Type definitions include proper JSDoc comments
- [x] Default action configurations defined for all 4 contexts
- [x] Role requirements specified (Delete = Partner only, Link = Partner/Associate)

## Files

- `packages/shared/types/src/document-preview-actions.ts` (new)
- `packages/shared/types/src/index.ts` (export)

## Dependencies

- **Blocks**: OPS-137, OPS-138, OPS-139, OPS-140, OPS-141
- **Blocked by**: None

## Epic

Context-Aware Document Preview Actions (Phase 1 - Foundation)
