# OPS-032: Repurpose /communications as Pending Classification Queue

**Status:** Open
**Priority:** P1-High
**Type:** Feature
**Created:** 2025-12-16
**Dependencies:** OPS-031 (Classification Review - Complete)

## Problem

The current `/communications` page is an inbox-style email viewer that mirrors Outlook. With case-based organization and the new classification system (OPS-027-031), this creates confusion:

- Users don't know where to find emails (here or in cases?)
- The page duplicates functionality available in Outlook
- No clear workflow: emails just sit there

## Solution

Transform `/communications` into the **Pending Classification Queue** - the single place for emails that need human review before being assigned to cases.

**Philosophy:** If it's in `/communications`, it needs action. Once classified, it lives in its case.

## Scope

### What Changes

1. **Replace inbox UI with ClassificationQueue**
   - Remove: ThreadList, MessageView, FilterBar (3-column layout)
   - Keep: MS sync controls (still needed to pull emails)
   - Add: ClassificationQueue as primary content

2. **Update page header**
   - Title: "Comunicări" → "De clasificat" (or keep "Comunicări" with subtitle)
   - Sync button stays (emails need to sync before classification)
   - Remove "Open Outlook" link (or keep if useful?)

3. **Empty state**
   - When queue is empty: celebratory "Toate emailurile sunt clasificate!" (already in component)
   - When no emails synced: prompt to sync (keep existing)

4. **Sidebar badge**
   - Integrate `ClassificationQueueBadge` into sidebar
   - Shows pending count (orange badge)

### What Stays

- Microsoft sync functionality
- MS reconnect prompts
- Error handling for sync failures

### Files to Modify

- `apps/web/src/app/communications/page.tsx` - Main redesign
- `apps/web/src/components/layout/Sidebar.tsx` - Add badge

### Files to Leverage (Already Built)

- `apps/web/src/components/communication/ClassificationQueue.tsx` - Main UI
- `apps/web/src/components/communication/ClassificationQueueBadge` - Sidebar badge
- `apps/web/src/hooks/useClassificationReview.ts` - Data fetching

## Implementation

```tsx
// Simplified page structure
<main>
  {/* Header with sync controls */}
  <header>
    <h1>De clasificat</h1>
    <SyncButton />
  </header>

  {/* MS reconnect prompt if needed */}
  {showMsReconnectPrompt && <ReconnectPrompt />}

  {/* Main content - the queue */}
  <ClassificationQueue
    maxHeight="calc(100vh - 150px)"
    onEmailClick={...}
    onCaseClick={...}
  />
</main>
```

## Acceptance Criteria

- [ ] `/communications` shows ClassificationQueue instead of inbox
- [ ] MS sync controls remain functional
- [ ] Empty queue shows success message
- [ ] No synced emails shows sync prompt
- [ ] Sidebar shows pending count badge
- [ ] Clicking email in queue can expand/view it
- [ ] Clicking case in queue navigates to case
- [ ] Assign/dismiss actions work correctly

## Design Decisions

1. **Keep sync on this page** - Users still need to sync emails to populate the queue
2. **Remove thread/message view** - Full email view could open in modal or link to Outlook
3. **Queue is the UI** - ClassificationQueue component already handles all states

## Out of Scope

- "All Emails" search (see OPS-033)
- Auto-sync on page load (could be future enhancement)
- Email detail modal (can view in Outlook for now)

## Notes

This is a simplification, not just a redesign. We're removing ~200 lines of inbox logic and replacing with an existing component. The key question is whether the ClassificationQueue component needs any adjustments for full-page use (it currently supports `maxHeight`).

## Session Log

_No sessions yet_
