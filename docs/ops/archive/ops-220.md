# OPS-220: ActorTypeConfig Data Model

**Type**: Feature | **Priority**: P2-Medium | **Complexity**: S

## Problem

Actor roles are hardcoded in an enum. Firms need ability to create custom actor types for specialized practice areas without code changes.

## Solution

Create ActorTypeConfig model following CaseTypeConfig pattern. Add optional `customRoleCode` to CaseActor for backwards-compatible custom type support. Built-in enum roles remain; custom types use the new field.

## Data Model

```prisma
model ActorTypeConfig {
  id        String   @id @default(uuid())
  firmId    String   @map("firm_id")
  name      String   @db.VarChar(100)  // "Mandatar Societate"
  code      String   @db.VarChar(50)   // "MANDATAR_SOCIETATE"
  isActive  Boolean  @default(true) @map("is_active")
  sortOrder Int      @default(0) @map("sort_order")
  createdAt DateTime @default(now()) @map("created_at")
  createdBy String   @map("created_by")

  firm    Firm @relation(fields: [firmId], references: [id], onDelete: Cascade)
  creator User @relation(fields: [createdBy], references: [id], onDelete: Restrict)

  @@unique([firmId, code])
  @@index([firmId])
  @@map("actor_type_configs")
}
```

## CaseActor Extension

```prisma
model CaseActor {
  // ... existing fields
  customRoleCode String? @map("custom_role_code") @db.VarChar(50)
  // When set, references ActorTypeConfig.code instead of role enum
}
```

## Implementation

1. Add ActorTypeConfig model to schema.prisma
2. Add optional `customRoleCode` field to CaseActor model
3. Add Firm relation for ActorTypeConfig
4. Create Prisma migration

## Done When

- [x] ActorTypeConfig model added to schema.prisma
- [x] `customRoleCode` optional field added to CaseActor model
- [x] Prisma migration created and applied
- [x] Indexes on firmId for query performance

## Resolution

**Completed 2025-12-25**

Implemented as specified:

1. Added `ActorTypeConfig` model following `CaseTypeConfig` pattern
2. Added optional `customRoleCode` field to `CaseActor` model
3. Added relations: `Firm.actorTypeConfigs` and `User.createdActorTypes`
4. Created migration `20251225120000_actor_type_config`

Also fixed pre-existing issue with `ClassificationAction` enum migration for shadow database compatibility.

## Files to Modify

- `packages/database/prisma/schema.prisma` - Add model + CaseActor field
- `packages/database/prisma/migrations/YYYYMMDD_actor_type_config/` - New migration

## Dependencies

None (can run parallel with OPS-218, OPS-219)

## Epic

Court Case Number + Dynamic Actor Types (OPS-218 to OPS-223)
