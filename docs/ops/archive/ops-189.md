# OPS-189: Sidebar Sender-First Display

**Status:** Closed | **Priority:** P2-Medium | **Type:** Feature | **Created:** 2025-12-24

## Overview

Update NEATRIBUIT section in CaseSidebar to prioritize sender over subject for better sorting decisions.

## Dependencies

- **Depends on:** None (pure UI change)
- **Blocks:** None
- **Parallel with:** OPS-187, OPS-188

## Context

Part of Communications UX Overhaul epic. When scrolling through unassigned emails, the sender is more important than the subject for deciding how to classify. Current UI shows subject first; we need to reverse this.

## Requirements

### 1. Current Layout (Before)

```
NEATRIBUIT (3)
├── Documente solicitate              ← Subject prominent
│   maria.popescu@email.com           ← Sender secondary
│   18 dec, 10:32
│
├── Re: Întâlnire vineri
│   ion.client@company.ro
│   17 dec, 14:15
```

### 2. New Layout (After)

```
NEATRIBUIT (3)
├── Maria Popescu                     ← Sender name prominent
│   maria.popescu@email.com           ← Email address
│   "Documente solicitate"            ← Subject smaller, quoted
│   18 dec, 10:32
│
├── Ion Client
│   ion.client@company.ro
│   "Re: Întâlnire vineri"
│   17 dec, 14:15
```

### 3. Typography

- Sender name: `text-sm font-medium text-gray-900`
- Email address: `text-xs text-gray-500`
- Subject: `text-xs text-gray-600 italic` (or with quotes)
- Date: `text-xs text-gray-400`

### 4. Preserve Existing Features

- Unread indicator (dot or bold)
- Attachment indicator (paperclip icon)
- Selection highlight
- Click to select

## Acceptance Criteria

- [x] Sender name displayed prominently (first line)
- [x] Email address shown below name
- [x] Subject in smaller secondary text (third line)
- [x] Date preserved
- [x] Unread/attachment indicators still work
- [x] Selection highlighting works
- [x] No layout shift or overflow issues

## Files to Modify

- `apps/web/src/components/communication/CaseSidebar.tsx`

## Estimated Scope

Small - Typography and layout changes only.

---

## Session Log

### Session 1 - 2025-12-24

**Completed:**

- Updated `UncertainEmailItem` component with sender-first layout
- Updated `CourtEmailItem` component with same pattern for consistency
- Both components now show:
  - Sender name (prominent, first line)
  - Email address (if name available, second line)
  - Subject (smaller, italic, quoted, third line)
  - Date preserved in top-right
  - Extracted references / suggested cases preserved

**Technical changes:**

- Added logic to extract sender name from email address when no display name
- Conditional rendering of email address (hidden if redundant)
- Used HTML entities for proper quotation marks around subject
- TypeScript compilation verified
