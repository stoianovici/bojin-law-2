# OPS-322: Linear Design System - Complete App-Wide Overhaul

**Status**: Planning
**Priority**: P1-High
**Type**: Epic
**Depends on**: OPS-315 through OPS-321 (foundation work)

---

## Sub-Issues

| Phase | ID      | Title                                    | Platform | Status |
| ----- | ------- | ---------------------------------------- | -------- | ------ |
| 1     | OPS-323 | Desktop Structural Components (linear/)  | Desktop  | New    |
| 1     | OPS-324 | Mobile Component Polish                  | Mobile   | New    |
| 1     | OPS-325 | Command Palette (⌘K)                     | Both     | New    |
| 2     | OPS-326 | Desktop Page Migration                   | Desktop  | New    |
| 2     | OPS-327 | Keyboard Shortcuts System                | Desktop  | New    |
| 2     | OPS-328 | Mobile Page Consistency                  | Mobile   | New    |
| 3     | OPS-329 | Loading/Empty/Error States & Transitions | Both     | New    |

**Execution Plan:**

```
Phase 1 (parallel):
├── OPS-323: Desktop Structural Components
├── OPS-324: Mobile Component Polish
└── OPS-325: Command Palette (⌘K)

Phase 2 (after respective Phase 1):
├── OPS-326: Desktop Page Migration [blocked by: 323]
├── OPS-327: Keyboard Shortcuts System [blocked by: 323]
└── OPS-328: Mobile Page Consistency [blocked by: 324]

Phase 3 (after Phase 2):
└── OPS-329: Loading/Empty/Error States [blocked by: 326, 328]
```

---

## Problem Statement

The Linear design epic (OPS-315-321) established the foundation but:

1. **Styling is incomplete**: Only core components were updated; ~45 pages still use old gray/blue styles
2. **Structural patterns missing**: HTML mockups defined component structures that weren't built
3. **Design philosophy not applied**: Linear's core principles (information density, keyboard-first, minimal cognitive load) weren't systematically implemented

---

## Linear Design Principles (Research Summary)

### Core Philosophy

| Principle                   | Description                                                  | Implementation                                              |
| --------------------------- | ------------------------------------------------------------ | ----------------------------------------------------------- |
| **Linearity**               | Straightforward, sequential layouts with logical progression | Single-column flows, no zig-zagging, consistent alignment   |
| **Minimal choices**         | Reduce decision points and cognitive load                    | Fewer CTAs per view, clear primary actions                  |
| **Information density**     | Pack more signal, less noise                                 | Tighter spacing, compact lists, micro typography for labels |
| **Keyboard-first**          | Nearly every action without mouse                            | `⌘K` command palette, contextual shortcuts, visible hints   |
| **Gentleness**              | Never overwhelm, respect user's time                         | Soft animations, predictable flows, contextual help         |
| **Hierarchy through color** | Use text/bg color shades, not size variations                | Primary/secondary/tertiary text colors create visual levels |

### Structural Patterns

**Desktop Layout (Inverted L-Shape):**

```
┌─────────────────────────────────────────────┐
│  Fixed Sidebar (240px)  │  Sticky Header    │
│  ────────────────────── │  ───────────────  │
│  Nav sections           │  Page title       │
│  Favorites              │  Search ⌘K        │
│  Teams/Projects         │  Actions          │
│                         ├──────────────────  │
│                         │  Content Grid     │
│                         │  (widget cards)   │
│                         │                   │
│  ───────────────────────│                   │
│  User menu (bottom)     │                   │
└─────────────────────────────────────────────┘
```

**Mobile Layout (Tab-First):**

```
┌─────────────────────┐
│ Masthead (date/user)│
├─────────────────────┤
│                     │
│  Scrollable content │
│  (briefing, feed)   │
│                     │
│              [FAB]  │
├─────────────────────┤
│ Tab Bar (4 items)   │
└─────────────────────┘
```

### Key UI Patterns

1. **Section Headers**: 11px uppercase, letter-spacing 0.5px, tertiary color
2. **List Items**: Subtle bottom borders, full-width hover, no visible dividers at rest
3. **Cards**: Secondary bg, subtle border, hover elevates with shadow
4. **Status Indicators**: Colored dots (pulsing for urgent), badge pills
5. **Metric Displays**: Large value, small label below, trend indicator
6. **Command Palette**: `⌘K` opens global search/actions
7. **Inline Filters**: Filter chips in header row, not dropdown menus
8. **Progress Bars**: Gradient fill, thin track, percentage beside

---

## Implementation Plan

### Phase 1: Structural Components (1 day)

Build reusable components matching mockup patterns:

```
apps/web/src/components/linear/
├── PageLayout.tsx        # Standard page wrapper with proper bg/spacing
├── SectionHeader.tsx     # Micro uppercase section titles
├── ListItem.tsx          # Case/task row with hover states
├── MetricCard.tsx        # Value + label + trend
├── WidgetGrid.tsx        # 2-3 column responsive grid
├── StatusDot.tsx         # Colored dot with optional pulse
├── CommandPalette.tsx    # ⌘K global search/actions
└── FilterChips.tsx       # Inline filter row
```

**Mobile additions:**

```
apps/web/src/components/mobile/
├── MobilePageLayout.tsx  # Masthead + content + safe areas
├── TabBar.tsx            # Bottom navigation
├── Drawer.tsx            # Slide-in navigation
├── BriefRow.tsx          # Activity feed item
├── FAB.tsx               # Floating action button
└── PullToRefresh.tsx     # Pull gesture handler
```

### Phase 2: Page Migration (1.5 days)

Migrate all pages to use Linear tokens and structural components:

**High-traffic pages (Priority 1):**

- [ ] `/page.tsx` (Dashboard/Home)
- [ ] `/cases/page.tsx`
- [ ] `/tasks/page.tsx`
- [ ] `/documents/page.tsx`
- [ ] `/login/page.tsx`

**Secondary pages (Priority 2):**

- [ ] `/cases/[caseId]/page.tsx`
- [ ] `/clients/[id]/page.tsx`
- [ ] `/time-tracking/page.tsx`
- [ ] `/analytics/page.tsx`
- [ ] `/settings/*` pages

**Admin/utility pages (Priority 3):**

- [ ] `/admin/*` pages
- [ ] `/reviews/*` pages
- [ ] Error pages (403, etc.)

**Migration checklist per page:**

1. Replace `bg-gray-50` → `bg-linear-bg-primary`
2. Replace `bg-white` → `bg-linear-bg-secondary`
3. Replace `text-gray-*` → `text-linear-text-*`
4. Replace `bg-blue-600` → `bg-linear-accent`
5. Replace `border-gray-*` → `border-linear-*`
6. Use `PageLayout` wrapper component
7. Use `SectionHeader` for section titles
8. Use `ListItem` for list rows
9. Add keyboard shortcuts where applicable

### Phase 3: Interaction Patterns (0.5 day)

Implement Linear-style interactions:

1. **Command Palette (`⌘K`)**
   - Global search across cases, tasks, documents
   - Quick actions (create case, log time, etc.)
   - Recent items

2. **Keyboard Navigation**
   - Arrow keys for list navigation
   - Enter to open
   - Escape to close modals/panels
   - Visible shortcut hints on hover

3. **Inline Editing**
   - Click to edit field values
   - Auto-save on blur
   - No separate edit modals for simple fields

4. **Contextual Tooltips**
   - Show keyboard shortcuts after hover delay
   - Non-intrusive positioning

### Phase 4: Polish & Consistency (0.5 day)

1. **Loading States**
   - Dark mode skeleton shimmer
   - Skeleton components for each widget type

2. **Empty States**
   - Consistent empty state component
   - Actionable (show what user can do)

3. **Error States**
   - Error boundaries with Linear styling
   - Inline error messages

4. **Transitions**
   - 150ms for interactive elements
   - Page transition animations
   - List item entrance animations

5. **Focus Management**
   - Visible focus rings (accent color)
   - Focus trap for modals
   - Skip links for accessibility

---

## File Changes Summary

### New Files

```
apps/web/src/components/linear/PageLayout.tsx
apps/web/src/components/linear/SectionHeader.tsx
apps/web/src/components/linear/ListItem.tsx
apps/web/src/components/linear/MetricCard.tsx
apps/web/src/components/linear/WidgetGrid.tsx
apps/web/src/components/linear/StatusDot.tsx
apps/web/src/components/linear/CommandPalette.tsx
apps/web/src/components/linear/FilterChips.tsx
apps/web/src/hooks/useKeyboardShortcuts.ts
```

### Modified Files (Pages)

~45 page files need migration (see Phase 2 list)

### Modified Files (Existing Components)

Components that need structural updates to match mockups:

- `CaseListTable.tsx` → Use `ListItem` pattern
- `TaskCard.tsx` → Match Linear card structure
- `DashboardGrid.tsx` → Use `WidgetGrid`
- Various filter components → Use `FilterChips`

---

## Acceptance Criteria

1. [ ] All pages use Linear bg/text tokens (no gray-50, bg-white, etc.)
2. [ ] Structural components match HTML mockup patterns
3. [ ] Command palette (`⌘K`) works globally
4. [ ] Keyboard shortcuts visible on hover
5. [ ] Mobile layout matches mobile mockup structure
6. [ ] Loading/empty/error states use Linear styling
7. [ ] No visual regressions (existing functionality preserved)

---

## Design References

- Desktop mockup: `docs/design/linear-style-mockup.html`
- Mobile mockup: `docs/design/linear-style-mobile-mockup.html`
- Design tokens: `docs/design/linear-style-tokens.md`
- Foundation work: OPS-316 through OPS-320

---

## Sources

- [How we redesigned the Linear UI](https://linear.app/now/how-we-redesigned-the-linear-ui)
- [Linear design: The SaaS design trend](https://blog.logrocket.com/ux-design/linear-design/)
- [The Elegant Design of Linear.app](https://telablog.com/the-elegant-design-of-linear-app/)
- [Linear Design System (Figma)](https://www.figma.com/community/file/1222872653732371433/linear-design-system)
- [Linear Method](https://linear.app/method)
