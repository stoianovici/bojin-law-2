# OPS-052: Collapsible TimeSection Component

**Status:** Implementing | **Priority:** P2-Medium | **Type:** Feature | **Created:** 2025-12-19

**Session Log:**

- [2025-12-19] Session 1 started. Created TimeSection component at `apps/web/src/components/case/TimeSection.tsx`

## Context

Part of the chronology structure improvement (OPS-051 through OPS-054). This issue creates the collapsible section component for time-grouped events.

## Scope

Create a reusable collapsible section component that displays:

- Section header with period label
- Event count badge
- Expand/collapse chevron
- Animated content reveal

## Implementation

### File Location

`apps/web/src/components/case/TimeSection.tsx`

### Interface

```typescript
export interface TimeSectionProps {
  label: string; // e.g., "Astăzi", "Săptămâna aceasta"
  count: number; // Number of events in section
  defaultExpanded?: boolean;
  children: React.ReactNode;
  className?: string;
}
```

### UI Design

```
┌─────────────────────────────────────────────────┐
│ ▼ Astăzi                                     3  │
├─────────────────────────────────────────────────┤
│   [Event content rendered as children]          │
│   [Event content rendered as children]          │
│   [Event content rendered as children]          │
└─────────────────────────────────────────────────┘

Collapsed state:
┌─────────────────────────────────────────────────┐
│ ▶ Mai vechi                                  21 │
└─────────────────────────────────────────────────┘
```

### Component Structure

```tsx
'use client';

import React, { useState } from 'react';
import { ChevronDown, ChevronRight } from 'lucide-react';
import { clsx } from 'clsx';

export function TimeSection({
  label,
  count,
  defaultExpanded = true,
  children,
  className,
}: TimeSectionProps) {
  const [expanded, setExpanded] = useState(defaultExpanded);

  return (
    <div className={clsx('border-b border-gray-100 last:border-b-0', className)}>
      <button
        onClick={() => setExpanded(!expanded)}
        className="w-full px-5 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors"
      >
        <div className="flex items-center gap-2">
          {expanded ? (
            <ChevronDown className="h-4 w-4 text-gray-400" />
          ) : (
            <ChevronRight className="h-4 w-4 text-gray-400" />
          )}
          <span className="text-sm font-medium text-gray-700">{label}</span>
        </div>
        <span className="text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full">{count}</span>
      </button>

      {expanded && <div className="divide-y divide-gray-100">{children}</div>}
    </div>
  );
}

TimeSection.displayName = 'TimeSection';
```

### Styling Details

- Header: `px-5 py-3` padding, `hover:bg-gray-50`
- Chevron: `h-4 w-4 text-gray-400`
- Label: `text-sm font-medium text-gray-700`
- Count badge: `text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full`
- Content area: `divide-y divide-gray-100` for event separators

### Default Expand State

The parent component will control which sections start expanded:

- `today`: expanded by default
- `thisWeek`: expanded by default
- `thisMonth`: collapsed by default
- `older`: collapsed by default

## Acceptance Criteria

- [x] Component created with TypeScript props interface
- [x] Expand/collapse toggle works
- [x] Count badge displays correctly
- [x] Follows project styling conventions (clsx, Tailwind)
- [x] Has displayName set

## Dependencies

- None (can be built independently)

## Blocked By

- Nothing

## Blocks

- OPS-054 (CaseChronology Integration)
