# OPS-300: AssistantSheet Component

**Type**: Feature
**Priority**: P1-High
**Platform**: Mobile
**Status**: Verifying
**Complexity**: M (Medium)
**Created**: 2025-12-27

## Problem

The desktop `AssistantPill` expands inline, but mobile needs a different interaction pattern. A slide-up sheet that covers ~60% of the screen provides better mobile UX for chat interactions.

## Solution

Create a bottom sheet component that slides up when the assistant is opened on mobile, containing the chat interface.

## Implementation

### Sheet Behavior

- Slides up from bottom using CSS transforms / Framer Motion
- 60vh max height (doesn't cover MobileHeader)
- Rounded top corners (rounded-t-2xl)
- Drag handle at top for gesture dismissal
- Backdrop overlay (semi-transparent black) with click-to-dismiss

### Gestures

- Swipe down on sheet or drag handle to dismiss
- Tap backdrop to dismiss
- Uses `useSwipeGesture` or similar pattern

### Content

- Reuses existing `AssistantChat` component from `components/assistant/`
- Header with "Asistent AI" title + close button
- Controlled by `useAssistantStore.isOpen`

```tsx
// Rough structure
export function AssistantSheet() {
  const { isOpen, toggleOpen } = useAssistantStore();

  return (
    <AnimatePresence>
      {isOpen && (
        <>
          <motion.div
            className="fixed inset-0 bg-black/30 z-40"
            onClick={toggleOpen}
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
          />
          <motion.div
            className="fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-2xl"
            style={{ height: '60vh' }}
            initial={{ y: '100%' }}
            animate={{ y: 0 }}
            exit={{ y: '100%' }}
            drag="y"
            dragConstraints={{ top: 0 }}
            onDragEnd={handleDragEnd}
          >
            <DragHandle />
            <SheetHeader onClose={toggleOpen} />
            <AssistantChat />
          </motion.div>
        </>
      )}
    </AnimatePresence>
  );
}
```

## Files

- `apps/web/src/components/mobile/AssistantSheet.tsx` (new)

## Dependencies

- None (Phase 1 - can start immediately)
- Uses existing `AssistantChat` from `components/assistant/`

## Blocked By

- None

## Blocks

- OPS-303: Add FAB to ConditionalLayout

## Done Criteria

- [x] Sheet slides up when `isOpen` is true
- [x] 60% screen height with rounded top corners
- [x] Drag handle visible at top
- [x] Backdrop overlay dismisses on tap
- [x] Swipe down gesture closes sheet
- [x] Renders `AssistantChat` component inside
- [x] Header with title "Asistent AI" + close button
- [x] Smooth spring animation on open/close
- [x] Exported from `components/mobile/index.ts`

## Session Log

### Session 1 (2025-12-27)

**Implemented AssistantSheet component:**

- Created `AssistantSheet.tsx` with Framer Motion slide-up animation
- 60vh height with rounded-t-2xl corners
- Drag handle (gray pill at top) for visual affordance
- Spring animation (damping: 30, stiffness: 300) for smooth open/close
- Backdrop with 30% opacity black, tap to dismiss
- Drag gesture with 100px threshold to close
- Header with "Asistent AI" title and close button
- Body scroll prevention when sheet is open
- Accessibility: role="dialog", aria-modal, aria-labelledby
- Exported from `components/mobile/index.ts`

**Files modified:**

- `apps/web/src/components/mobile/AssistantSheet.tsx` (new)
- `apps/web/src/components/mobile/index.ts` (added export)

**Status:** Ready for verification on mobile device
