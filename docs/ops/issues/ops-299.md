# OPS-299: AssistantFAB Component

**Type**: Feature
**Priority**: P1-High
**Platform**: Mobile
**Status**: Verifying
**Complexity**: S (Small)
**Created**: 2025-12-27

## Problem

The mobile AI assistant is embedded at the bottom of MobileHome and disappears when navigating to other pages (/cases, /tasks, etc.). Users lose access to the assistant outside the home screen.

## Solution

Create a floating action button (FAB) component for mobile that provides persistent access to the AI assistant from any screen.

## Implementation

- 56px circular button positioned at bottom-right
- Uses existing `useAssistantStore` for state management (`toggleOpen`)
- Sparkles or MessageCircle icon (matching desktop AssistantPill style)
- Unread count badge when `unreadCount > 0`
- `z-50` to stay above all content
- Respects `safe-area-inset-bottom` for devices with home indicators
- Framer Motion scale animation on tap

```tsx
// Rough structure
export function AssistantFAB() {
  const { toggleOpen, unreadCount } = useAssistantStore();

  return (
    <motion.button
      onClick={toggleOpen}
      className="fixed bottom-6 right-4 z-50 w-14 h-14 rounded-full bg-blue-600
                 text-white shadow-lg flex items-center justify-center
                 pb-[env(safe-area-inset-bottom)]"
      whileTap={{ scale: 0.95 }}
    >
      <Sparkles className="w-6 h-6" />
      {unreadCount > 0 && <Badge count={unreadCount} />}
    </motion.button>
  );
}
```

## Files

- `apps/web/src/components/mobile/AssistantFAB.tsx` (new)

## Dependencies

- None (Phase 1 - can start immediately)

## Blocked By

- None

## Blocks

- OPS-303: Add FAB to ConditionalLayout

## Done Criteria

- [x] FAB renders at bottom-right, 56px circular
- [x] Tap calls `toggleOpen` from assistant store
- [x] Shows unread badge when `unreadCount > 0`
- [x] Respects safe-area-inset-bottom
- [x] Has tap feedback animation (whileTap: scale 0.92)
- [x] Exported from `components/mobile/index.ts`

## Session Log

### 2025-12-27 - Session 1

- Created `AssistantFAB.tsx` with all required features:
  - 56px button (w-14 h-14) with rounded-full
  - Uses `useAssistantStore` for `toggleOpen`, `unreadCount`, `isOpen`
  - Sparkles icon from lucide-react
  - Unread badge shows when count > 0 (capped at 9+)
  - `safe-area-inset-bottom` via CSS env() function
  - Framer Motion spring entrance + whileTap/whileHover animations
  - Hides when assistant sheet is already open
- Exported from `components/mobile/index.ts`
- Linting passes with no errors
