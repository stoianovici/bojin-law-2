# OPS-337: Linear Migration Polish & Consistency Audit

**Type**: UI Enhancement | **Complexity**: M | **Platform**: Both
**Status**: In Progress
**Blocked By**: OPS-331, OPS-332, OPS-333, OPS-334, OPS-335, OPS-336
**Epic**: Linear UI Migration (OPS-331 to OPS-337)

## Problem

After individual migrations, need to ensure visual consistency across the entire application and polish any remaining gaps.

## Approach

- Visual audit of all screens side-by-side
- Fix any inconsistent spacing, colors, or typography
- Verify all hover/focus/active states
- Test dark mode across all components
- Add missing animations/transitions
- Document any remaining edge cases

## Done When

- [x] All screens pass visual consistency check
- [x] Dark mode works throughout
- [x] All interactive states are consistent
- [x] Loading skeletons use Linear styling
- [x] Empty/error states are consistent
- [x] No legacy color values remain in migrated components (task colors centralized)

## Audit Checklist

### Colors
- [x] No hardcoded hex values (use CSS variables) - task colors centralized to `task-colors.ts`
- [x] Consistent use of `linear-bg-*` tokens
- [x] Consistent use of `linear-text-*` tokens
- [x] Status colors match design system

### Typography
- [x] Section headers use 11px uppercase
- [x] Body text uses correct sizes
- [x] Font weights are consistent

### Spacing
- [x] Consistent padding in cards
- [x] Consistent gaps in grids
- [x] Consistent margins between sections

### Interactive States
- [x] Hover states use `linear-bg-hover`
- [x] Active states use accent color
- [x] Focus rings are visible
- [x] Disabled states are consistent

### Animations
- [x] Page transitions work
- [x] Hover animations are smooth
- [x] Loading states animate correctly

## Session Log

### Session 1 - 2025-12-28

**Focus**: Color consistency audit and task color centralization

**Work Done**:
1. **Created centralized task colors utility** (`apps/web/src/utils/task-colors.ts`)
   - Consolidated duplicate TASK_TYPE_COLORS definitions from 4 components
   - Consolidated duplicate PRIORITY_COLORS definitions from 3 components
   - Added COLUMN_COLORS for KanbanBoard columns
   - Added TASK_TYPE_LABELS, TASK_TYPE_LABELS_SHORT, PRIORITY_LABELS, STATUS_LABELS
   - Added utility functions: getTaskTypeColor, getTaskTypeLabel, getPriorityColor, getPriorityLabel

2. **Updated components to use centralized colors**:
   - `ListView.tsx` - imports from task-colors.ts
   - `KanbanBoard.tsx` - imports from task-colors.ts, uses COLUMN_COLORS
   - `MultiWeekCalendarView.tsx` - imports from task-colors.ts
   - `SpanningTaskCard.tsx` - imports from task-colors.ts

3. **Fixed bug in KanbanBoard** (`task.metadata?.review` - optional chaining)

4. **Visual audit completed**:
   - Dashboard: ✅ Linear dark theme consistent
   - Tasks Calendar: ✅ Task type colors in legend and cards
   - Tasks Kanban: ✅ Column colors, task cards with type borders and priority dots
   - Tasks List: ✅ Type borders, priority indicators, pagination
   - Analytics: ✅ Consistent card styling, empty states

**Files Modified**:
- `apps/web/src/utils/task-colors.ts` (new)
- `apps/web/src/components/task/ListView.tsx`
- `apps/web/src/components/task/KanbanBoard.tsx`
- `apps/web/src/components/task/MultiWeekCalendarView.tsx`
- `apps/web/src/components/task/calendar/SpanningTaskCard.tsx`

**Remaining**:
- Chart components still use hardcoded hex values (expected - Recharts requires direct values)
- Test files use hardcoded values for assertions (OK)
