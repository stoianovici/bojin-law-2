# OPS-344: UI Pattern Discovery

**Type**: Discovery | **Priority**: P2-Medium | **Platform**: Both | **Status**: In Progress
**Parent**: [OPS-338](ops-338.md) | **Supersedes**: OPS-342, OPS-343

## Purpose

Collaborative discovery of UI patterns before implementation. Each session focuses on one pattern, discussing principles and capturing decisions through back-and-forth conversation.

## Process

1. Pick a pattern to explore
2. Look at examples in the app together
3. Discuss what works, what doesn't, why
4. Capture principles and decisions
5. Move to next pattern
6. After all patterns: create implementation issues

## Patterns to Discover

| Pattern              | Status                  | File                                                    |
| -------------------- | ----------------------- | ------------------------------------------------------- |
| Home Page (Desktop)  | **Done** ✓ Mockups      | `patterns/home-desktop.md`, `mockups/home-desktop.html` |
| Communications Page  | **Done**                | `patterns/communications.md`                            |
| Tasks Page           | **Done** ✓ Mockups      | `mockups/tasks-*.html`                                  |
| Calendar Page        | **Done** ✓ Mockup       | `mockups/calendar-page.html`                            |
| Documents Page       | **Done** ✓ Mockup       | `patterns/documents.md`, `mockups/documents-page.html`  |
| Status Badges        | **Done** ✓ Extracted    | `patterns/badges.md`                                    |
| Cards                | **Done** ✓ Extracted    | `patterns/cards.md`                                     |
| Data Tables          | **Done** ✓ Mockup       | `patterns/tables.md`, `mockups/tables-exploration.html` |
| Forms & Inputs       | **Done** ✓ Extracted    | `patterns/forms.md`                                     |
| Modals/Dialogs       | **Done** ✓ Mockup       | `patterns/modals.md`, `mockups/modals-exploration.html` |
| Page Headers         | **Done** ✓ Extracted    | `patterns/headers.md`                                   |
| Navigation (Tabs)    | **Done** ✓ Extracted    | `patterns/navigation.md`                                |
| Collapsible Sections | **Done** ✓ Extracted    | `patterns/sections.md`                                  |
| Design Tokens        | **Done** ✓ Consolidated | `patterns/tokens.md`                                    |
| Avatars              | **Done** ✓ Documented   | `patterns/avatars.md`                                   |
| Empty/Loading/Error  | **Done** ✓ Mockup       | `patterns/states.md`, `mockups/states-exploration.html` |

## Session Log

### Session 1

**Date**: 2024-12-29
**Pattern**: Home Page (Desktop)
**Summary**: Compared Linear-style mockup to current implementation. Made 10 decisions:

- Sidebar: Fixed 240px, "Bojin Law" logo, two nav sections, user menu at bottom
- Dashboard: Simplified briefing, static 3-col grid, 4 widgets
- Components: Minimal case items, task items with checkbox, status dots + priority pills

**Mockups Created:**

- `mockups/home-desktop.html` - Full dashboard with 5 widgets (added Acțiuni Rapide)
- `mockups/command-palette.html` - ⌘K palette reference (standalone)

### Session 2

**Date**: 2024-12-29
**Pattern**: Communications Page
**Summary**: Compared `linear-style-communications-v2.html` mockup to current implementation. Key decisions:

- Layout: 2-column (sidebar + message panel), remove right context panel
- Header: Keep sync button/status, view toggle, Outlook link. Remove backfill button, prompts
- Attachments: Move from right panel to inline in message header (below participants)
- Compose: Inline at bottom (not modal), keep AI draft, attachments, validation

### Session 3

**Date**: 2024-12-29
**Pattern**: Tasks & Calendar Pages
**Summary**: Split /tasks into two separate pages. Created 3 HTML mockups.

**Navigation Split:**

- "Sarcini" → Tasks page (list/kanban views)
- "Calendar" → Separate calendar page

**Tasks Page Decisions:**

- Layout: 2-column with fixed right detail panel (not sliding)
- Task grouping: URGENTE, ACEASTĂ SĂPTĂMÂNĂ, FINALIZATE RECENT (collapsible sections)
- Task row: Checkbox | Priority bar | Title + Case link + Description | Status badge | Due date | Avatar
- Header: Search + "Sarcinile mele" toggle + Filters (Caz, Scadență) + View toggles + "+ Sarcină nouă"
- Detail panel: Subtasks (with progress) + Activity feed + Comment input

**Calendar Page Decisions:**

- Week view: Mon-Fri only (no weekend column)
- Sidebar: Calendar type filters (Termene Instanță, Audieri, etc.) + Team filter (checkboxes)
- Colors: Copied from `linear-style-calendar.html` (red=court, orange=deadline, blue=meeting, purple=task, pink=hearing, green=reminder)
- Events: Semi-transparent background with colored left border

**Mockups Created:**

- `docs/design/ui-adaptation/mockups/tasks-new-task.html` - New task modal
- `docs/design/ui-adaptation/mockups/tasks-page.html` - Full tasks page
- `docs/design/ui-adaptation/mockups/calendar-page.html` - Calendar page with team filter

### Session 4

**Date**: 2024-12-29
**Pattern**: Documents Page
**Summary**: Analyzed current documents page structure and made decisions for Linear redesign. Iterated based on feedback to simplify cards and add period-based grouping.

**Context**: /documents page only (not dashboard widget)

**Key Decisions:**

1. **Layout**: 3-panel (nav sidebar 240px + case sidebar 280px + content)
2. **Navigation**: Add main app navigation sidebar for consistent navigation
3. **Status toggle**: Three buttons - Ciornă (default), Review (with badge), Final (with badge)
4. **Notification badges**: Review and Final show count badges for documents needing attention
5. **Remove filters**: No Type filter, no Sort button, no "Toate" option
6. **Period grouping**: Documents grouped by time (Această săptămână, current month, older months)
7. **Collapsible sections**: Week/month expanded, older months collapsed by default
8. **File type badge**: Colored badge top-right (PDF=red, DOCX=blue, XLSX=green, IMG=orange)
9. **Card simplification**: No category badges, no relative dates (period provides context)
10. **Action buttons**: Keep Mapă/Word at bottom-right of card
11. **Remove from cards**: Uploader name, SharePoint indicator, "Importat" badge, category badge

**Header Structure:**

```
[Search] [Ciornă | Review (3) | Final (2)] ----spacer---- [Grid|List] [+ Încarcă]
```

**Card Layout:**

```
┌─────────────────────────────┐
│ [Thumbnail/Preview]    [PDF]│
├─────────────────────────────┤
│ filename.pdf                │
│ 2.1 MB          [Mapă][Word]│
└─────────────────────────────┘
```

**Period Section:**

```
[▼] ACEASTĂ SĂPTĂMÂNĂ  4 documente  ────────────────
[Document cards grid]
```

**Mockup Created:**

- `mockups/documents-page.html` - Full documents page with sidebar, status toggle, period grouping

### Session 5

**Date**: 2024-12-29
**Task**: Pattern Extraction from Existing Mockups
**Summary**: Extracted reusable patterns from existing page mockups into dedicated pattern files.

**Patterns Documented:**

1. **badges.md** - Status dots, priority bars, priority pills, status pills, file type badges, count badges
2. **cards.md** - Widget cards, document cards, task items, case items, briefing card
3. **forms.md** - Search box, buttons (primary/secondary/icon/action), filter buttons, textarea, checkboxes
4. **navigation.md** - Status toggle, view toggle, tab bar, sidebar navigation, breadcrumbs
5. **headers.md** - Sticky header, dashboard header, page header with toolbar, breadcrumb header
6. **sections.md** - Task sections, period sections, folder tree, expand/collapse behavior

**Remaining Patterns:**

- Modals/Dialogs (exists in tasks-new-task.html, needs doc)
- Empty/Loading/Error states (partial - needs full states)

### Session 6

**Date**: 2024-12-29
**Pattern**: Data Tables
**Summary**: Explored 6 different table approaches with visual mockup. Made decisions for which style to use where.

**Table Styles Defined:**

1. **Minimal Table** - Light borders, title+description rows (cases, documents)
2. **Grouped Table** - Collapsible date/status sections (time entries, activity logs)
3. **Report Table** - Header + filters + export + totals (billing, AI usage, analytics)

**Usage Mapping:**
| Page | Style |
|------|-------|
| /cases | Minimal |
| /cases/[id]/time | Grouped by date |
| /tasks | Grouped by urgency |
| /admin/ai-ops | Report with filters |
| /reports/\* | Report layout |

**Mockup Created:**

- `mockups/tables-exploration.html` - Side-by-side comparison of 6 table styles

**Pattern Documented:**

- `patterns/tables.md` - Full pattern with usage guide

### Session 7

**Date**: 2024-12-29
**Pattern**: Modals & Dialogs
**Summary**: Created visual exploration of 5 modal types, documented patterns.

**Modal Types Defined:**

1. **Confirmation Dialog** (400px, center) - Destructive actions with icon + title + description
2. **Form Modal** (520px, center) - Header/body/footer structure for create/edit
3. **Command Palette** (520px, top-center) - ⌘K global search and quick actions
4. **Slide-Over Panel** (400px, right edge) - View/edit details keeping context
5. **Toast Notifications** (380px, bottom-right) - Ephemeral success/error feedback

**Key Decisions:**

- Backdrop: 80% opacity for modals, 60% for slide-over/palette
- Animations: 0.15s scale for modals, 0.2s slide for slide-over/toast
- Footer: Keyboard hints on left, actions on right
- Button order: Secondary (Cancel) → Primary/Danger (Action)

**Mockup Created:**

- `mockups/modals-exploration.html` - Side-by-side comparison of all 5 modal types

**Pattern Documented:**

- `patterns/modals.md` - Full pattern with structure, styling, animations

### Session 8

**Date**: 2024-12-29
**Task**: Gap Analysis & Foundation Patterns
**Summary**: Reviewed all patterns for completeness, identified gaps, documented foundational patterns.

**Gap Analysis:**

- Identified design tokens scattered across mockups
- Avatars used everywhere but not documented
- Confirmed dropdown menus, tooltips can wait
- Agreed: Apply Linear principles where mockups are lacking (no need for every page)

**Patterns Documented:**

1. **tokens.md** - Consolidated design tokens:
   - Colors (bg, border, text, accent, status, priority, calendar)
   - Typography (font family, sizes, weights, line heights)
   - Spacing scale (4px base)
   - Border radius, shadows, gradients
   - Z-index scale, layout constants
   - Tailwind mapping reference

2. **avatars.md** - User avatar pattern:
   - 5 size variants (xs to xl)
   - 6 gradient color palette with assignment logic
   - Avatar groups with overlap stacking
   - Status indicators (online/offline)
   - Initials extraction algorithm
   - Accessibility guidelines

### Session 9

**Date**: 2024-12-29
**Pattern**: Empty / Loading / Error States
**Summary**: Created comprehensive exploration and documented all state patterns.

**Empty States:**

1. **Page Empty** - Icon + title + description + CTA (first-time experience)
2. **Widget Empty** - Neutral icon + positive message (dashboard widgets)
3. **Inline Empty** - Compact icon + text (comments, activity)
4. **Search Empty** - Query shown + clear action

**Loading States:**

1. **Spinner** - 3 sizes (16/32/48px), optional text
2. **Skeleton** - Shimmer animation, mirrors content structure
3. **Progress Bar** - Determinate (%) or indeterminate
4. **Overlay** - Dim content + spinner for refresh

**Error States:**

1. **Page Error** - 403/404/500 full-page with code + icon + action
2. **Section Error** - Warning icon + retry for API failures
3. **Inline Error** - Red banner for form validation
4. **Toast Error** - Bottom-right notification

**Mockup Created:**

- `mockups/states-exploration.html` - All variants with usage guide

**Pattern Documented:**

- `patterns/states.md` - Full pattern with CSS, copy, accessibility

### Session 10

**Date**: 2024-12-29
**Task**: Mobile UI Documentation
**Summary**: Created comprehensive mobile UI documentation based on desktop patterns.

**Documentation Created:**

```
docs/design/ui-adaptation/mobile/
├── README.md              - Overview and quick reference
├── principles.md          - Touch targets, typography, spacing, safe areas
├── navigation.md          - Bottom nav, FAB, headers, tabs, sheets
├── components.md          - Cards, badges, buttons, inputs, lists, modals
├── interactions.md        - Gestures (tap, swipe, pull, pinch, long-press)
├── implementation.md      - Full checklist for implementation
└── pages/
    ├── home.md            - Mobile dashboard layout
    ├── cases.md           - Case list and detail
    ├── tasks.md           - Task list, detail sheet, swipe actions
    ├── documents.md       - 2-col grid, preview, upload
    ├── communications.md  - Email list, detail, compose
    └── calendar.md        - Week/agenda views, event sheets
```

**Key Mobile Adaptations:**

1. Bottom tab bar (5 tabs) replaces sidebar
2. All touch targets ≥ 44px
3. Input font size 16px (prevents iOS zoom)
4. Safe area support for notch/home indicator
5. Bottom sheets replace modals
6. Swipe actions for quick task completion/deletion
7. Pull-to-refresh on all lists
8. Wizard pattern for complex forms (new case)

## Deliverables

### Desktop Patterns

```
docs/design/ui-adaptation/patterns/
├── tokens.md        ✓ Created (foundation)
├── avatars.md       ✓ Created
├── badges.md        ✓ Created
├── cards.md         ✓ Created
├── forms.md         ✓ Created
├── headers.md       ✓ Created
├── modals.md        ✓ Created
├── navigation.md    ✓ Created
├── sections.md      ✓ Created
├── tables.md        ✓ Created
└── states.md        ✓ Created
```

### Mobile Documentation

```
docs/design/ui-adaptation/mobile/
├── README.md              ✓ Overview and quick reference
├── principles.md          ✓ Touch targets, typography, safe areas
├── navigation.md          ✓ Bottom nav, FAB, sheets
├── components.md          ✓ Cards, buttons, inputs, modals
├── interactions.md        ✓ Gestures and feedback
├── implementation.md      ✓ Implementation checklist
└── pages/
    ├── home.md            ✓ Mobile dashboard
    ├── cases.md           ✓ Cases list/detail
    ├── tasks.md           ✓ Tasks list/detail
    ├── documents.md       ✓ Documents grid/preview
    ├── communications.md  ✓ Email list/detail/compose
    └── calendar.md        ✓ Week/agenda views
```

## Done When

- [x] All desktop patterns discovered and documented
- [x] Principles established for each pattern
- [x] Mobile UI documentation complete
- [x] Ready to create implementation issues

## Next Steps

Create implementation issues based on discovered patterns:

- Desktop implementation issues (OPS-345+)
- Mobile implementation issues (separate track)
