# OPS-325: Command Palette (⌘K)

**Status**: Completed
**Priority**: P2-Medium
**Type**: Feature
**Platform**: Both
**Parent**: OPS-322
**Blocked by**: None

---

## Problem Statement

Linear's signature `⌘K` command palette for global search and quick actions doesn't exist. This is a key interaction pattern that improves keyboard-first navigation.

---

## Approach

### Component Structure

```
apps/web/src/components/linear/
├── CommandPalette.tsx       # Main palette component
├── CommandPaletteItem.tsx   # Individual result/action item
└── CommandPaletteGroup.tsx  # Section grouping

apps/web/src/hooks/
└── useCommandPalette.ts     # State management, search logic
```

### Features

1. **Global Shortcut**
   - `⌘K` (Mac) / `Ctrl+K` (Windows) opens from anywhere
   - `Escape` closes
   - Focus trap while open

2. **Search**
   - Fuzzy search across cases, tasks, documents, clients
   - Debounced input (150ms)
   - Recent items shown by default

3. **Quick Actions**
   - Create new case
   - Log time entry
   - Create task
   - Navigate to page

4. **Keyboard Navigation**
   - Arrow up/down to navigate results
   - Enter to select
   - Tab to cycle through sections

### Visual Design (from mockup)

```css
/* Backdrop */
background: rgba(0, 0, 0, 0.6);
backdrop-filter: blur(4px);

/* Palette container */
background: var(--bg-elevated);
border: 1px solid var(--border-default);
border-radius: 12px;
box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
max-width: 560px;
margin: 20vh auto;

/* Search input */
background: transparent;
border-bottom: 1px solid var(--border-subtle);
padding: 16px;
font-size: 15px;

/* Result items */
padding: 8px 12px;
border-radius: 6px;
/* Selected: */
background: var(--bg-hover);
```

---

## Acceptance Criteria

- [x] `⌘K` / `Ctrl+K` opens palette from anywhere
- [x] Fuzzy search works across entities (cases, tasks, documents)
- [x] Quick actions work (create case, log time, etc.)
- [x] Keyboard navigation (arrows, enter, escape)
- [x] Recent items shown on open
- [x] Matches Linear visual style (dark, blur backdrop)
- [x] Focus returns to previous element on close

---

## Key Files

- `apps/web/src/components/linear/CommandPalette.tsx` (new)
- `apps/web/src/hooks/useCommandPalette.ts` (new)
- May need GraphQL query for search

---

## Notes

- This is independent of page migration - can ship standalone
- Consider using existing search infrastructure if available
- Shortcut hint `⌘K` should appear in search boxes (already in mockup)
