# OPS-315: Linear-Style Visual Redesign (Epic)

**Type**: Epic | **Priority**: P2-Medium | **Platform**: Desktop + Mobile | **Complexity**: L

## Vision

Transform the app's visual identity from the current light/gray theme to a modern **Linear-style dark mode** design. This is a **visual-only change** - component logic, state management, and data flow remain unchanged.

**Key Principles:**

- Change **how things look**, not **how things work**
- Shared design tokens work across desktop and mobile
- Incremental implementation - each PR is small and revertible
- Dark mode as default, with light mode option preserved

## Design References

| Resource       | Location                                      |
| -------------- | --------------------------------------------- |
| Desktop Mockup | `docs/design/linear-style-mockup.html`        |
| Mobile Mockup  | `docs/design/linear-style-mobile-mockup.html` |
| Design Tokens  | `docs/design/linear-style-tokens.md`          |

**Open mockups:**

```bash
open docs/design/linear-style-mockup.html
open docs/design/linear-style-mobile-mockup.html
```

## Design System

### Color Palette

**Backgrounds:**
| Token | Hex | Usage |
|-------|-----|-------|
| `--bg-primary` | `#0A0A0B` | Main app background |
| `--bg-secondary` | `#111113` | Sidebar, cards |
| `--bg-tertiary` | `#18181B` | Nested elements, inputs |
| `--bg-hover` | `#232326` | Hover states |

**Text:**
| Token | Hex | Usage |
|-------|-----|-------|
| `--text-primary` | `#EEEFF1` | Headings, important text |
| `--text-secondary` | `#A1A1AA` | Body text |
| `--text-tertiary` | `#71717A` | Muted text, labels |

**Accent (Linear Purple):**
| Token | Hex | Usage |
|-------|-----|-------|
| `--accent-primary` | `#5E6AD2` | Primary actions, links, active states |
| `--accent-secondary` | `rgba(94, 106, 210, 0.15)` | Active item backgrounds |

**Status:**
| Status | Color | Background |
|--------|-------|------------|
| Success | `#22C55E` | `rgba(34, 197, 94, 0.15)` |
| Warning | `#F59E0B` | `rgba(245, 158, 11, 0.15)` |
| Error | `#EF4444` | `rgba(239, 68, 68, 0.15)` |
| Info | `#3B82F6` | `rgba(59, 130, 246, 0.15)` |

**Borders:**

```css
--border-subtle: rgba(255, 255, 255, 0.06);
--border-default: rgba(255, 255, 255, 0.1);
```

### Typography

**Font:** Inter (already available via Google Fonts)

```css
font-family:
  'Inter',
  -apple-system,
  BlinkMacSystemFont,
  sans-serif;
```

**Scale:**

- Display: 24-28px / 700 weight (metrics, large numbers)
- Title: 16px / 600 weight (page titles)
- Heading: 13px / 600 weight (card titles)
- Body: 14px / 400 weight (default)
- Small: 13px / 500 weight (list items)
- Caption: 12px / 400 weight (meta text)
- Micro: 11px / 600 weight (badges, uppercase labels)

### Visual Effects

**Borders:** Transparent white, not solid colors

```css
border: 1px solid rgba(255, 255, 255, 0.06);
```

**Card hover:**

```css
.card:hover {
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}
```

**Accent glow (for primary buttons):**

```css
box-shadow: 0 0 40px rgba(94, 106, 210, 0.15);
```

**Active navigation:**

```css
background: rgba(94, 106, 210, 0.15);
color: #5e6ad2;
```

## Desktop vs Mobile Differences

| Aspect       | Desktop                | Mobile                            |
| ------------ | ---------------------- | --------------------------------- |
| Navigation   | Fixed sidebar (240px)  | Bottom tab bar + swipe drawer     |
| Cards        | Multi-column grid      | Single column + horizontal scroll |
| Interactions | Hover states           | Touch/active states (scale 0.98)  |
| Header       | Sticky bar with search | Masthead with date + avatar       |

**Mobile-specific:**

- Touch targets minimum 44x44px
- Safe area padding for notch/home indicator
- Horizontal scroll for case cards
- Pull-to-refresh gesture

## Implementation Phases

### Phase 1: Foundation (OPS-316)

**Goal:** Add design tokens to Tailwind, enable dark mode toggle

**Tasks:**

1. Extend `tailwind.config.js` with Linear color tokens
2. Update `globals.css` with CSS custom properties
3. Update `ThemeProvider` for dark mode class management
4. Add Inter font via Google Fonts
5. Test with one component (Button or Card)

**Files:**

- `apps/web/tailwind.config.js`
- `apps/web/src/app/globals.css`
- `apps/web/src/app/layout.tsx` (font)
- `apps/web/src/providers/ThemeProvider.tsx`

**Estimated:** 2-3 hours

---

### Phase 2: Core Components (OPS-317, OPS-318)

**Goal:** Restyle shared components that work on both platforms

**OPS-317: Priority 1 Components**

- Card (`apps/web/src/components/ui/card.tsx`)
- Button (primary, secondary, ghost variants)
- Badge / Status indicators
- Input / Search box
- Progress bar

**OPS-318: Priority 2 Components**

- List items (task rows, case rows)
- Section headers
- Avatar
- Dropdown/Select
- Checkbox

**Pattern:**

```tsx
// Before
className = 'bg-white border-gray-200 text-gray-900';

// After (dark mode)
className = 'bg-linear-bg-secondary border-linear-subtle text-linear-text-primary';
```

**Estimated:** 4-6 hours total

---

### Phase 3: Desktop Layout (OPS-319)

**Goal:** Restyle desktop-specific layout components

**Tasks:**

1. Sidebar navigation
   - Dark background (`#111113`)
   - Subtle border right
   - Active item with accent tint
   - Section titles uppercase, small caps

2. Header bar
   - Blur backdrop (`backdrop-filter: blur(12px)`)
   - Search box with `⌘K` shortcut hint
   - Icon buttons with badges

3. Dashboard grid
   - Card spacing and borders
   - Widget containers

4. Morning Briefing card
   - Gradient accent line at top
   - Stats grid

**Files:**

- `apps/web/src/components/layout/Sidebar.tsx`
- `apps/web/src/components/layout/Header.tsx` (if exists)
- `apps/web/src/components/dashboard/DashboardGrid.tsx`
- `apps/web/src/components/dashboard/MorningBriefing.tsx`
- Widget components in `apps/web/src/components/dashboard/widgets/`

**Estimated:** 4-5 hours

---

### Phase 4: Mobile Layout (OPS-320)

**Goal:** Restyle mobile-specific components

**Tasks:**

1. MobileTabBar
   - Dark background
   - Active tab with accent color
   - Safe area padding

2. MobileDrawer
   - Dark slide-in panel
   - User section with gradient avatar
   - Navigation items

3. MobileHome
   - Dark masthead
   - Briefing section styling
   - Stats cards

4. BriefRow / FeedSection
   - Dark row styling
   - Icon backgrounds
   - Touch active states

5. AssistantFAB
   - Gradient background
   - Glow shadow

**Files:**

- `apps/web/src/components/mobile/MobileTabBar.tsx`
- `apps/web/src/components/mobile/MobileDrawer.tsx`
- `apps/web/src/components/mobile/MobileHome.tsx`
- `apps/web/src/components/mobile/MobileBriefing.tsx`
- `apps/web/src/components/mobile/BriefRow.tsx`
- `apps/web/src/components/mobile/AssistantFAB.tsx`

**Estimated:** 4-5 hours

---

### Phase 5: Polish (OPS-321)

**Goal:** Animations, transitions, edge cases

**Tasks:**

1. Transitions
   - `transition: all 0.15s ease` on interactive elements
   - Hover/active state animations

2. Focus states (accessibility)
   - Focus ring with accent color
   - `:focus-visible` for keyboard navigation

3. Loading skeletons
   - Dark mode shimmer effect
   - Update existing skeleton components

4. Empty states
   - Dark themed empty illustrations
   - Muted text styling

5. Error states
   - Error backgrounds and borders

**Estimated:** 2-3 hours

---

## Parallelization Map

```
Phase 1: OPS-316 (Foundation)
              │
    ┌─────────┴─────────┐
    ▼                   ▼
OPS-317             OPS-318
(Core P1)           (Core P2)
    │                   │
    └─────────┬─────────┘
              │
    ┌─────────┴─────────┐
    ▼                   ▼
OPS-319             OPS-320
(Desktop)           (Mobile)
    │                   │
    └─────────┬─────────┘
              │
              ▼
          OPS-321
          (Polish)
```

**Can run in parallel after Phase 1:**

- OPS-317 + OPS-318 (different components)
- OPS-319 + OPS-320 (different platforms)

## Tailwind Config Extension

```js
// tailwind.config.js
module.exports = {
  darkMode: 'class', // Already set
  theme: {
    extend: {
      colors: {
        'linear-bg': {
          primary: '#0A0A0B',
          secondary: '#111113',
          tertiary: '#18181B',
          elevated: '#1C1C1F',
          hover: '#232326',
        },
        'linear-accent': {
          DEFAULT: '#5E6AD2',
          hover: '#6B76DC',
          muted: 'rgba(94, 106, 210, 0.15)',
        },
        'linear-text': {
          primary: '#EEEFF1',
          secondary: '#A1A1AA',
          tertiary: '#71717A',
          muted: '#52525B',
        },
      },
      borderColor: {
        'linear-subtle': 'rgba(255, 255, 255, 0.06)',
        'linear-default': 'rgba(255, 255, 255, 0.1)',
      },
      fontFamily: {
        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
      },
    },
  },
};
```

## Risk Assessment

| Risk                     | Mitigation                                   |
| ------------------------ | -------------------------------------------- |
| Breaking existing styles | Each PR is small, easy to revert             |
| Accessibility (contrast) | Test with WCAG contrast checker              |
| Performance (fonts)      | Inter already common, good caching           |
| Light mode users         | Preserve light mode option via ThemeProvider |

## Testing Checklist

- [ ] Desktop Chrome (1920x1080)
- [ ] Desktop Safari
- [ ] Mobile Chrome DevTools (390x844 iPhone 14)
- [ ] Real iOS device
- [ ] Real Android device
- [ ] Dark mode toggle works
- [ ] No FOUC (flash of unstyled content)
- [ ] Contrast ratios pass WCAG AA

## Success Criteria

1. App defaults to dark mode with Linear aesthetic
2. All dashboard widgets styled consistently
3. Mobile experience matches mockup
4. Light mode still available via toggle
5. No functionality regressions
6. Loading states work in dark mode

## Total Estimated Effort

| Phase                    | Hours           |
| ------------------------ | --------------- |
| Phase 1: Foundation      | 2-3             |
| Phase 2: Core Components | 4-6             |
| Phase 3: Desktop Layout  | 4-5             |
| Phase 4: Mobile Layout   | 4-5             |
| Phase 5: Polish          | 2-3             |
| **Total**                | **16-22 hours** |

Spread across ~6 working days with parallel execution.

## Notes

- This is **visual only** - no component API changes
- Existing `dark:` Tailwind classes may conflict - audit needed
- Consider shipping Phase 1-3 first (desktop), then Phase 4 (mobile)
- MobileTabBar already has some `dark:` classes - update to use new tokens
