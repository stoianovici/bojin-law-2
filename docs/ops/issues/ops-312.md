# OPS-312: ConditionalLayout Footer Integration

**Type**: Feature | **Priority**: P1-High | **Platform**: Mobile
**Status**: Completed
**Blocked by**: OPS-309 (MobileTabBar Component)

## Problem

MobileTabBar needs to appear on all authenticated mobile pages, not just home. Currently `ConditionalLayout` only renders children + AssistantFAB + AssistantSheet for mobile.

## Approach

Modify `ConditionalLayout` mobile branch:

- Import MobileTabBar
- Render in correct order: children, MobileTabBar, AssistantFAB, AssistantSheet
- Ensure proper z-index stacking (TabBar: z-40, FAB: z-50)
- Add wrapper with bottom padding so content doesn't hide behind fixed footer

## Implementation

```tsx
// apps/web/src/components/layout/ConditionalLayout.tsx

// Add import
import { AssistantFAB, AssistantSheet, MobileTabBar } from '../mobile';

// Modify mobile branch (around line 108-116):
if (isMobile) {
  return (
    <>
      {/* Main content with bottom padding for tab bar */}
      <div className="pb-14" style={{ paddingBottom: 'calc(56px + env(safe-area-inset-bottom))' }}>
        {children}
      </div>
      {/* Tab bar at bottom */}
      <MobileTabBar />
      {/* FAB above tab bar */}
      <AssistantFAB />
      {/* Sheet overlays everything */}
      <AssistantSheet />
    </>
  );
}
```

## Done When

- [x] MobileTabBar visible on all mobile pages
- [x] Navigation works from any page (Cases, Docs, Tasks, Comms)
- [x] Content not obscured by fixed footer (bottom padding applied)
- [x] FAB still visible and accessible (positioned above tab bar)
- [x] AssistantSheet still works (opens over everything)

## Files

- `apps/web/src/components/layout/ConditionalLayout.tsx` - add MobileTabBar import + render
- `apps/web/src/components/mobile/index.ts` - ensure MobileTabBar is exported

## Testing

- Navigate to /cases on mobile - tab bar visible
- Navigate to /documents - tab bar visible, Docs tab active
- Scroll content - tab bar stays fixed
- Tap FAB - should open assistant sheet
- Content at bottom of page should be visible (not hidden behind tab bar)
