# OPS-330: Linear Design Migration - Actual Implementation

**Status**: In Progress
**Priority**: P1-High
**Type**: Feature
**Supersedes**: OPS-322 through OPS-329 (scope was inaccurate)

---

## Problem Statement

Previous issues (OPS-322-329) claimed Linear design migration was complete, but audit reveals:
- **23% actual completion** (not 90%+)
- **2,736 lines** of old color classes remain
- **115 files** still need migration
- Core components (Case, Task, Communication) are **0% migrated**

The UI hasn't visually changed because migrated pages render unmigrated child components.

---

## Accurate Scope

### Migration Status by Category

| Category | Total | Migrated | Remaining | Old Lines | Priority |
|----------|-------|----------|-----------|-----------|----------|
| UI Primitives | 21 | 17 (81%) | 4 | 6 | P1 |
| Dashboard | 7 | 4 (57%) | 3 | 13 | P1 |
| Layout | 8 | 3 (38%) | 5 | 34 | P1 |
| Pages | 44 | 11 (25%) | 28 | 572 | P2 |
| Case Components | 40 | 0 (0%) | 40 | 609 | P2 |
| Task Components | 18 | 0 (0%) | 18 | 265 | P2 |
| Communication | 31 | 0 (0%) | 31 | 481 | P3 |
| Analytics | 24 | 1 (4%) | 24 | 502 | P3 |
| Admin | 11 | 0 (0%) | 11 | 254 | P4 |
| **TOTAL** | **~165** | **~36** | **~115** | **2,736** | |

---

## Color Mapping Reference

```
Old Class              →  Linear Token
─────────────────────────────────────────
bg-gray-50             →  bg-linear-bg-primary
bg-white               →  bg-linear-bg-secondary
bg-gray-100            →  bg-linear-bg-tertiary
bg-gray-200            →  bg-linear-bg-hover
text-gray-900          →  text-linear-text-primary
text-gray-700          →  text-linear-text-secondary
text-gray-500          →  text-linear-text-tertiary
text-gray-400          →  text-linear-text-muted
border-gray-200        →  border-linear-border-subtle
border-gray-300        →  border-linear-border
bg-blue-600            →  bg-linear-accent
hover:bg-blue-700      →  hover:bg-linear-accent-hover
text-blue-600          →  text-linear-accent
focus:ring-blue-500    →  focus:ring-linear-accent
```

### Status Colors (need Linear equivalents)
```
Old Status             →  Linear Token
─────────────────────────────────────────
bg-green-100           →  bg-linear-success/15
text-green-800         →  text-linear-success
bg-red-100             →  bg-linear-error/15
text-red-800           →  text-linear-error
bg-amber-100           →  bg-linear-warning/15
text-amber-800         →  text-linear-warning
bg-orange-100          →  bg-linear-warning/15
text-orange-800        →  text-linear-warning
```

---

## Implementation Plan

### Phase 1: Complete Foundations (2-3 hours)
Finish what's 50%+ done to establish solid base.

**UI Primitives (4 files):**
- [ ] `dialog.tsx`
- [ ] `switch.tsx`
- [ ] `toast.tsx`
- [ ] `tooltip.tsx`

**Dashboard (3 files):**
- [ ] `AssociateDashboard.tsx`
- [ ] `ParalegalDashboard.tsx`
- [ ] `WidgetContainer.tsx`

**Layout (5 files):**
- [ ] `CommandPalette.tsx`
- [ ] `NotificationCenter.tsx`
- [ ] `QuickActions.tsx`
- [ ] `RoleSwitcher.tsx`
- [ ] Any remaining layout files

### Phase 2: Core Components (2-3 days)
The components that render inside already-migrated pages.

**Case Components (40 files) - Highest impact:**
- [ ] `CaseListTable.tsx` - main cases list
- [ ] `CaseCard.tsx` - case cards
- [ ] `CaseFilters.tsx` - filter bar
- [ ] `CaseHeader.tsx` - case detail header
- [ ] `CaseSearchBar.tsx` - search input
- [ ] `PendingApprovalTable.tsx` - approval queue
- [ ] ... (34 more files)

**Task Components (18 files):**
- [ ] `KanbanBoard.tsx`
- [ ] `ListView.tsx`
- [ ] `TaskCard.tsx`
- [ ] `TaskDetailModal.tsx`
- [ ] `CreateTaskModal.tsx`
- [ ] ... (13 more files)

### Phase 3: Secondary Flows (1-2 days)

**Communication (31 files):**
- [ ] `CaseSidebar.tsx`
- [ ] `MessageView.tsx`
- [ ] `ConversationView.tsx`
- [ ] ... (28 more files)

**Remaining Pages (28 files):**
- [ ] `/communications/page.tsx`
- [ ] `/analytics/*` pages
- [ ] `/admin/*` pages
- [ ] `/settings/*` pages
- [ ] ... (remaining pages)

### Phase 4: Analytics & Admin (1 day)

**Analytics (24 files):**
- All analytics widgets and panels

**Admin (11 files):**
- All admin components

---

## Files Reference

### Unmigrated UI Primitives
```
apps/web/src/components/ui/dialog.tsx
apps/web/src/components/ui/switch.tsx
apps/web/src/components/ui/toast.tsx
apps/web/src/components/ui/tooltip.tsx
```

### Unmigrated Case Components (40 files)
```
apps/web/src/components/case/AIInsightsPanel.tsx
apps/web/src/components/case/ActorsManagement.tsx
apps/web/src/components/case/AddTeamMemberModal.tsx
apps/web/src/components/case/BillingInfoSection.tsx
apps/web/src/components/case/CaseAISummarySection.tsx
apps/web/src/components/case/CaseCard.tsx
apps/web/src/components/case/CaseDocumentsList.tsx
apps/web/src/components/case/CaseFilters.tsx
apps/web/src/components/case/CaseHeader.tsx
apps/web/src/components/case/CaseListTable.tsx
apps/web/src/components/case/CaseMetadataEditor.tsx
apps/web/src/components/case/CaseRevenueKPIWidget.tsx
apps/web/src/components/case/CaseSearchBar.tsx
apps/web/src/components/case/CaseTypeCombobox.tsx
apps/web/src/components/case/ContactsStep.tsx
apps/web/src/components/case/DocumentBrowserModal.tsx
apps/web/src/components/case/DocumentFolderTree.tsx
apps/web/src/components/case/DocumentList.tsx
apps/web/src/components/case/DocumentUploadModal.tsx
apps/web/src/components/case/DraftModeToolbar.tsx
apps/web/src/components/case/EditRatesModal.tsx
apps/web/src/components/case/EmailImportWizard.tsx
apps/web/src/components/case/InlineContactCard.tsx
apps/web/src/components/case/InlineEditField.tsx
apps/web/src/components/case/PendingApprovalTable.tsx
apps/web/src/components/case/RateHistoryModal.tsx
apps/web/src/components/case/ReviewCaseModal.tsx
apps/web/src/components/case/RiskAlertBanner.tsx
apps/web/src/components/case/RiskIndicatorsPanel.tsx
apps/web/src/components/case/TaskCard.tsx
apps/web/src/components/case/TaskKanbanBoard.tsx
apps/web/src/components/case/TeamManagement.tsx
apps/web/src/components/case/WorkspaceTabs.tsx
apps/web/src/components/case/tabs/NotesTab.tsx
apps/web/src/components/case/tabs/TasksTab.tsx
apps/web/src/components/case/tabs/TimeEntriesTab.tsx
```

---

## Acceptance Criteria

1. [ ] All UI primitives use Linear tokens
2. [ ] All layout components use Linear tokens
3. [ ] All case components use Linear tokens
4. [ ] All task components use Linear tokens
5. [ ] `/cases` page renders entirely in dark theme
6. [ ] `/tasks` page renders entirely in dark theme
7. [ ] No `bg-gray-*`, `bg-white`, `text-gray-*` in migrated components
8. [ ] Status badges use Linear status colors

---

## Progress Log

### 2024-12-28 (Session 5) - Phase 2 COMPLETE
**Completed Case Components:**
- [x] CaseRevenueKPIWidget.tsx - ~32 color changes (loading, error, variance states)
- [x] DocumentBrowserModal.tsx - ~41 color changes (full modal migration)
- [x] CaseDocumentsList.tsx - 4 color changes (file type icons)
- [x] ActorsManagement.tsx - Court actor type amber → linear-warning
- [x] ContactsStep.tsx - Court actor type amber → linear-warning
- [x] InlineContactCard.tsx - Court actor type amber → linear-warning
- [x] DraftModeToolbar.tsx - warning icon amber → linear-warning
- [x] tabs/IntelligenceTab.tsx - 3 icon colors migrated

**Files Migrated This Session:** 8 files
**Old Color Occurrences Removed:** ~85 lines

**Phase 2 Status:** COMPLETE - All case components migrated
**Remaining in Test Files Only:** 27 occurrences in .test.tsx files (expected - testing old class names)

### 2024-12-28 (Session 4)
**Phase 2 - Billing Components (fully migrated):**
- [x] sections/BillingSection.tsx - 4 color fixes
- [x] sections/ReferencesSection.tsx - ~30 color changes
- [x] sections/ContactsSection.tsx - ~5 color changes
- [x] EditRatesModal.tsx - ~50 color changes
- [x] RateHistoryModal.tsx - ~40 color changes
- [x] BillingInfoSection.tsx - ~30 color changes

**Files Migrated This Session:** 6 files
**Old Color Occurrences Removed:** ~160 lines

### 2024-12-28 (Session 3)
**Phase 2 Continued - Case Components:**
- [x] CaseDocumentsList.tsx - migrated (4 color fixes)
- [x] CaseTypeCombobox.tsx - full migration (~40 color changes)
- [x] CaseAISummarySection.tsx - full migration (~30 color changes)

**Phase 2 - Tab Components:**
- [x] tabs/OverviewTab.tsx - full migration (~25 color changes)
- [x] tabs/CommunicationsTab.tsx - full migration (~30 color changes)

**Phase 2 - Section Components:**
- [x] sections/SectionGroup.tsx - full migration (~15 color changes)
- [x] sections/CaseDetailsSection.tsx - full migration (~20 color changes)

**Files Migrated This Session:** 7 files
**Old Color Occurrences Removed:** ~165 lines

### 2024-12-28 (Session 2)
**Phase 1 Complete:**
- [x] UI Primitives: dialog, switch, toast, tooltip (4 files)
- [x] Dashboard: AssociateDashboard, ParalegalDashboard, WidgetContainer (3 files)
- [x] Layout: CommandPalette, NotificationCenter, QuickActions, RoleSwitcher (4 files)

**Phase 2 Started - Case Components:**
- [x] CaseFilters.tsx - migrated
- [x] CaseListTable.tsx - migrated
- [x] CaseCard.tsx - already migrated (confirmed)
- [x] CaseHeader.tsx - already migrated (confirmed)
- [x] CaseSearchBar.tsx - already migrated (confirmed)
- [x] AIInsightsPanel.tsx - already migrated (confirmed)
- [x] ActorsManagement.tsx - already migrated (confirmed)
- [x] AddTeamMemberModal.tsx - already migrated (confirmed)

**Files Migrated Session 2:** 11 files
**Old Color Occurrences Removed:** ~400 lines

### 2024-12-28 (Session 1)
- Created issue with accurate scope from audit
- Previous OPS-322-329 superseded due to inaccurate completion claims
