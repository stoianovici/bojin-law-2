# OPS-305: Remove Embedded Assistant from MobileHome

**Type**: Refactor
**Priority**: P2-Medium
**Platform**: Mobile
**Status**: Completed
**Complexity**: S (Small)
**Created**: 2025-12-27

## Problem

The embedded assistant bar at the bottom of MobileHome (the "DO section") is now redundant since we have the global FAB + AssistantSheet. This bar takes up ~1/3 of the screen and limits the feed's visible area.

## Solution

Remove the "DO section" from MobileHome to reclaim screen space for the sectioned feed. The assistant is now accessible via the floating FAB on all pages.

## Implementation

### Code to Remove (MobileHome.tsx ~lines 90-115)

```tsx
{/* DO section */}
<section className="bg-white border-t border-gray-200 px-4 py-3 pb-safe">
  {/* Quick action buttons */}
  <div className="flex gap-2 mb-3">
    <QuickActionButton ... />
    <QuickActionButton ... />
    <QuickActionButton ... />
  </div>

  {/* Chat input */}
  <form onSubmit={handleChatSubmit}>
    <input ... />
  </form>
</section>
```

### State to Remove

```tsx
const [chatInput, setChatInput] = useState('');

const handleChatSubmit = useCallback(
  (e: React.FormEvent) => {
    e.preventDefault();
    if (chatInput.trim() && !isOpen) toggleOpen();
    setChatInput('');
  },
  [chatInput, isOpen, toggleOpen]
);

const handleQuickAction = useCallback(
  (action: 'tasks' | 'notes' | 'done') => {
    if (action === 'tasks') router.push('/tasks');
    else toggleOpen();
  },
  [router, isOpen, toggleOpen]
);
```

### QuickActionButton Sub-component

Remove the `QuickActionButton` component definition (if it's defined inline in MobileHome).

### Layout Update

Change the main section from split layout to full height:

**Before:**

```tsx
<main className="flex-1 flex flex-col">
  <section className="flex-1 overflow-hidden">
    {' '}
    {/* ~2/3 */}
    <BriefFeed />
  </section>
  <section className="...">
    {' '}
    {/* ~1/3 - assistant bar */}
    ...
  </section>
</main>
```

**After:**

```tsx
<main className="flex-1 flex flex-col overflow-hidden">
  <section className="flex-1 overflow-y-auto">{/* Sectioned feed from OPS-304 */}</section>
</main>
```

### Quick Actions Alternative

The quick action buttons (Sarcini, Notițe, Finalizat) could be:

1. **Dropped entirely** - Users use FAB for assistant, navigate to /tasks directly
2. **Moved to FAB long-press menu** - Future enhancement if needed
3. **Added as suggestions in AssistantSheet** - Already have quick suggestions there

Recommendation: Drop for now, add back if users miss them.

## Files

- `apps/web/src/components/mobile/MobileHome.tsx` (edit)

## Dependencies

- OPS-303: FAB must be working globally (so assistant is still accessible)
- OPS-304: Sectioned feed must be working (so we have content to show)

## Blocked By

- OPS-303: Add FAB to ConditionalLayout
- OPS-304: MobileHome Sectioned Feed Integration

## Blocks

- None (final cleanup task)

## Done Criteria

- [x] "DO section" (bottom assistant bar) removed
- [x] Chat input state removed
- [x] Quick action handlers removed
- [x] QuickActionButton component removed (if inline)
- [x] Feed section uses full available height
- [x] No dead imports or unused code
- [x] Assistant still accessible via FAB
- [x] Mobile home loads without errors

## Testing

1. Load mobile home → No assistant bar at bottom
2. Feed takes full screen (minus header)
3. Tap FAB → Assistant opens in sheet
4. Navigate to /tasks → Works (was previously via quick action)
5. No console errors

## Session Log

### Session 1 - 2025-12-27

- Removed "DO section" (embedded assistant bar) from MobileHome.tsx
- Removed `chatInput` state, `handleQuickAction`, and `handleChatSubmit` handlers
- Removed `QuickActionButton` component definition
- Removed unused `useAssistantStore` import
- Updated header comment to reference OPS-305
- Verified TypeScript compilation passes
- Tested in mobile viewport (390x844):
  - Feed now uses full screen height
  - FAB visible and functional
  - AssistantSheet opens correctly from FAB
