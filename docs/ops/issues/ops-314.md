# OPS-314: Desktop MorningBriefing Card Invisible Text

| Field        | Value      |
| ------------ | ---------- |
| **Status**   | Verifying  |
| **Priority** | P1-High    |
| **Platform** | Desktop    |
| **Created**  | 2025-12-28 |

## Symptom

The Morning Briefing card on the desktop Partner Dashboard shows invisible/white text against a light gradient background, making all content unreadable.

## Root Cause

The Card component (`apps/web/src/components/ui/card.tsx:10`) uses ShadCN-style CSS classes `bg-card` and `text-card-foreground`:

```tsx
className={cn('rounded-lg border bg-card text-card-foreground shadow-sm', className)}
```

**These CSS variables are NOT defined** anywhere in the project:

- Not in `apps/web/src/app/globals.css`
- Not in `packages/ui/src/tokens/tokens.css`
- Not in `apps/web/tailwind.config.js`

Without definitions, Tailwind treats these as invalid/arbitrary classes that resolve to nothing, resulting in:

- Transparent background (inheriting parent's `bg-gray-50`)
- Unpredictable text color (likely defaulting to white/light)

## Fix

Add ShadCN theme CSS variables to `apps/web/src/app/globals.css`:

```css
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --border: 214.3 31.8% 91.4%;
  }
}
```

And update `apps/web/tailwind.config.js` to use these variables:

```js
theme: {
  extend: {
    colors: {
      background: "hsl(var(--background))",
      foreground: "hsl(var(--foreground))",
      card: {
        DEFAULT: "hsl(var(--card))",
        foreground: "hsl(var(--card-foreground))",
      },
      // ... other colors
    }
  }
}
```

## Alternative Quick Fix

Replace `bg-card text-card-foreground` with explicit Tailwind classes that are defined:

```tsx
// In card.tsx
className={cn('rounded-lg border bg-white text-gray-900 shadow-sm', className)}
```

## Verification

- [ ] Card has white background on desktop
- [ ] Card text is visible (dark gray/black)
- [ ] MorningBriefing sections are readable
- [ ] Run `pnpm preflight`

## Applied Fix

Used the quick fix approach - replaced undefined CSS classes with explicit Tailwind classes:

**File**: `apps/web/src/components/ui/card.tsx`

```tsx
// Card component (line 10) - changed from:
className={cn('rounded-lg border bg-card text-card-foreground shadow-sm', className)}
// To:
className={cn('rounded-lg border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm', className)}

// CardDescription (line 39) - changed from:
className={cn('text-sm text-muted-foreground', className)}
// To:
className={cn('text-sm text-gray-500 dark:text-gray-400', className)}
```

Added dark mode support while fixing the issue.

## Session Log

| Date       | Action                                    |
| ---------- | ----------------------------------------- |
| 2025-12-28 | Investigated invisible text issue         |
| 2025-12-28 | Found missing CSS variable definitions    |
| 2025-12-28 | Documented fix options                    |
| 2025-12-28 | Applied quick fix with explicit Tailwind  |
| 2025-12-28 | Status â†’ Verifying (awaiting visual test) |
